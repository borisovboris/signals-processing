import{a as Mo}from"./chunk-IGLFARZE.js";import{a as Dn,b as Ro,c as gd}from"./chunk-U5VWOXID.js";import{a as In,d as bo,e as So,j as Co,k as Tn,l as Po,n as Oo,o as Io,p as Nn}from"./chunk-OTL7X6PS.js";import{a as ur,b as To,c as dr,d as No,e as Do}from"./chunk-SPCOMQNX.js";import{b as On,d as lr}from"./chunk-4S6LF2QW.js";import{a as Pn}from"./chunk-2JCW2XGL.js";import{a as cr,d as xe,e as _o,q as Ze,t as Mr,u as $o,v as wo,x as vt,y as Eo}from"./chunk-7FJ4ADOC.js";import{Aa as Ks,Ac as vo,Ba as Hs,Bc as go,Ca as jt,Dc as yo,Ea as de,Ec as ht,Ga as We,Ia as yn,Ja as k,Jb as wn,Ka as Qe,Kb as or,L as nr,La as ir,Lb as En,Mb as bn,N as Us,Na as Xe,Oa as ar,P as Ls,Pa as sr,Qb as Sn,Ra as Gs,S as Dr,Sa as Js,T as hn,Ta as Bs,U as Be,Ub as Zs,Vb as mt,Wa as Ys,Wb as eo,X as Dt,Xa as Ws,Y as Rt,Ya as _n,Yb as to,Za as pt,Zb as ro,_b as no,a as G,ac as io,b as ae,bc as ao,cc as Rr,d as $,dc as Pe,e as Vs,ec as so,f as er,fc as oo,gc as co,i as Nt,ia as N,ja as ue,ka as vn,kc as Cn,l as tr,la as gn,mb as Qs,nb as Xs,oa as zs,ob as $n,q as De,qa as B,sa as Ye,ta as Mt,u as Fs,uc as lo,v as rr,vc as uo,wc as fo,x as $i,xa as O,xc as po,y as ft,ya as P,yc as mo,za as Re,zc as ho}from"./chunk-OWV6CK4N.js";var qr=$(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.regexpCode=K.getEsmExportName=K.getProperty=K.safeStringify=K.stringify=K.strConcat=K.addCodeArg=K.str=K._=K.nil=K._Code=K.Name=K.IDENTIFIER=K._CodeOrName=void 0;var kr=class{};K._CodeOrName=kr;K.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var kt=class extends kr{constructor(e){if(super(),!K.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};K.Name=kt;var Me=class extends kr{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof kt&&(r[n.str]=(r[n.str]||0)+1),r),{})}};K._Code=Me;K.nil=new Me("");function Ko(t,...e){let r=[t[0]],n=0;for(;n<e.length;)bi(r,e[n]),r.push(t[++n]);return new Me(r)}K._=Ko;var Ei=new Me("+");function Ho(t,...e){let r=[Ar(t[0])],n=0;for(;n<e.length;)r.push(Ei),bi(r,e[n]),r.push(Ei,Ar(t[++n]));return Sd(r),new Me(r)}K.str=Ho;function bi(t,e){e instanceof Me?t.push(...e._items):e instanceof kt?t.push(e):t.push(Od(e))}K.addCodeArg=bi;function Sd(t){let e=1;for(;e<t.length-1;){if(t[e]===Ei){let r=Cd(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Cd(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof kt||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof kt))return`"${t}${e.slice(1)}`}function Pd(t,e){return e.emptyStr()?t:t.emptyStr()?e:Ho`${t}${e}`}K.strConcat=Pd;function Od(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Ar(Array.isArray(t)?t.join(","):t)}function Id(t){return new Me(Ar(t))}K.stringify=Id;function Ar(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}K.safeStringify=Ar;function Td(t){return typeof t=="string"&&K.IDENTIFIER.test(t)?new Me(`.${t}`):Ko`[${t}]`}K.getProperty=Td;function Nd(t){if(typeof t=="string"&&K.IDENTIFIER.test(t))return new Me(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}K.getEsmExportName=Nd;function Dd(t){return new Me(t.toString())}K.regexpCode=Dd});var Oi=$(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.ValueScope=ye.ValueScopeName=ye.Scope=ye.varKinds=ye.UsedValueState=void 0;var we=qr(),Si=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Ci;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Ci=ye.UsedValueState||(ye.UsedValueState={}));ye.varKinds={const:new we.Name("const"),let:new we.Name("let"),var:new we.Name("var")};var jn=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof we.Name?e:this.name(e)}name(e){return new we.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};ye.Scope=jn;var kn=class extends we.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,we._)`.${new we.Name(r)}[${n}]`}};ye.ValueScopeName=kn;var Rd=(0,we._)`\n`,Pi=class extends jn{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts=ae(G({},e),{_n:e.lines?Rd:we.nil})}get(){return this._scope}name(e){return new kn(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(e),{prefix:a}=i,s=(n=r.key)!==null&&n!==void 0?n:r.ref,c=this._values[a];if(c){let p=c.get(s);if(p)return p}else c=this._values[a]=new Map;c.set(s,i);let u=this._scope[a]||(this._scope[a]=[]),f=u.length;return u[f]=r.ref,i.setValue(r,{property:a,itemIndex:f}),i}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,we._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(e,r,n={},i){let a=we.nil;for(let s in e){let c=e[s];if(!c)continue;let u=n[s]=n[s]||new Map;c.forEach(f=>{if(u.has(f))return;u.set(f,Ci.Started);let p=r(f);if(p){let h=this.opts.es5?ye.varKinds.var:ye.varKinds.const;a=(0,we._)`${a}${h} ${f} = ${p};${this.opts._n}`}else if(p=i?.(f))a=(0,we._)`${a}${p}${this.opts._n}`;else throw new Si(f);u.set(f,Ci.Completed)})}return a}};ye.ValueScope=Pi});var D=$(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.or=A.and=A.not=A.CodeGen=A.operators=A.varKinds=A.ValueScopeName=A.ValueScope=A.Scope=A.Name=A.regexpCode=A.stringify=A.getProperty=A.nil=A.strConcat=A.str=A._=void 0;var F=qr(),Ve=Oi(),gt=qr();Object.defineProperty(A,"_",{enumerable:!0,get:function(){return gt._}});Object.defineProperty(A,"str",{enumerable:!0,get:function(){return gt.str}});Object.defineProperty(A,"strConcat",{enumerable:!0,get:function(){return gt.strConcat}});Object.defineProperty(A,"nil",{enumerable:!0,get:function(){return gt.nil}});Object.defineProperty(A,"getProperty",{enumerable:!0,get:function(){return gt.getProperty}});Object.defineProperty(A,"stringify",{enumerable:!0,get:function(){return gt.stringify}});Object.defineProperty(A,"regexpCode",{enumerable:!0,get:function(){return gt.regexpCode}});Object.defineProperty(A,"Name",{enumerable:!0,get:function(){return gt.Name}});var Fn=Oi();Object.defineProperty(A,"Scope",{enumerable:!0,get:function(){return Fn.Scope}});Object.defineProperty(A,"ValueScope",{enumerable:!0,get:function(){return Fn.ValueScope}});Object.defineProperty(A,"ValueScopeName",{enumerable:!0,get:function(){return Fn.ValueScopeName}});Object.defineProperty(A,"varKinds",{enumerable:!0,get:function(){return Fn.varKinds}});A.operators={GT:new F._Code(">"),GTE:new F._Code(">="),LT:new F._Code("<"),LTE:new F._Code("<="),EQ:new F._Code("==="),NEQ:new F._Code("!=="),NOT:new F._Code("!"),OR:new F._Code("||"),AND:new F._Code("&&"),ADD:new F._Code("+")};var ct=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Ii=class extends ct{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Ve.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=fr(this.rhs,e,r)),this}get names(){return this.rhs instanceof F._CodeOrName?this.rhs.names:{}}},qn=class extends ct{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof F.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=fr(this.rhs,e,r),this}get names(){let e=this.lhs instanceof F.Name?{}:G({},this.lhs.names);return Vn(e,this.rhs)}},Ti=class extends qn{constructor(e,r,n,i){super(e,n,i),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Ni=class extends ct{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Di=class extends ct{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Ri=class extends ct{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Mi=class extends ct{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=fr(this.code,e,r),this}get names(){return this.code instanceof F._CodeOrName?this.code.names:{}}},xr=class extends ct{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,i=n.length;for(;i--;){let a=n[i];a.optimizeNames(e,r)||(Md(e,a.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>At(e,r.names),{})}},lt=class extends xr{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},ji=class extends xr{},ki=(()=>{class t extends lt{}return t.kind="else",t})(),An=(()=>{class t extends lt{constructor(r,n){super(n),this.condition=r}render(r){let n=`if(${this.condition})`+super.render(r);return this.else&&(n+="else "+this.else.render(r)),n}optimizeNodes(){super.optimizeNodes();let r=this.condition;if(r===!0)return this.nodes;let n=this.else;if(n){let i=n.optimizeNodes();n=this.else=Array.isArray(i)?new ki(i):i}if(n)return r===!1?n instanceof t?n:n.nodes:this.nodes.length?this:new t(Wo(r),n instanceof t?[n]:n.nodes);if(!(r===!1||!this.nodes.length))return this}optimizeNames(r,n){var i;if(this.else=(i=this.else)===null||i===void 0?void 0:i.optimizeNames(r,n),!!(super.optimizeNames(r,n)||this.else))return this.condition=fr(this.condition,r,n),this}get names(){let r=super.names;return Vn(r,this.condition),this.else&&At(r,this.else.names),r}}return t.kind="if",t})(),Un=(()=>{class t extends lt{}return t.kind="for",t})(),Ai=class extends Un{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=fr(this.iteration,e,r),this}get names(){return At(super.names,this.iteration.names)}},qi=class extends Un{constructor(e,r,n,i){super(),this.varKind=e,this.name=r,this.from=n,this.to=i}render(e){let r=e.es5?Ve.varKinds.var:this.varKind,{name:n,from:i,to:a}=this;return`for(${r} ${n}=${i}; ${n}<${a}; ${n}++)`+super.render(e)}get names(){let e=Vn(super.names,this.from);return Vn(e,this.to)}},xn=class extends Un{constructor(e,r,n,i){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=fr(this.iterable,e,r),this}get names(){return At(super.names,this.iterable.names)}},Go=(()=>{class t extends lt{constructor(r,n,i){super(),this.name=r,this.args=n,this.async=i}render(r){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(r)}}return t.kind="func",t})(),Jo=(()=>{class t extends xr{render(r){return"return "+super.render(r)}}return t.kind="return",t})(),xi=class extends lt{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,i;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(i=this.finally)===null||i===void 0||i.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&At(e,this.catch.names),this.finally&&At(e,this.finally.names),e}},Bo=(()=>{class t extends lt{constructor(r){super(),this.error=r}render(r){return`catch(${this.error})`+super.render(r)}}return t.kind="catch",t})(),Yo=(()=>{class t extends lt{render(r){return"finally"+super.render(r)}}return t.kind="finally",t})(),Vi=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts=ae(G({},r),{_n:r.lines?`
`:""}),this._extScope=e,this._scope=new Ve.Scope({parent:e}),this._nodes=[new ji]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,i){let a=this._scope.toName(r);return n!==void 0&&i&&(this._constants[a.str]=n),this._leafNode(new Ii(e,a,n)),a}const(e,r,n){return this._def(Ve.varKinds.const,e,r,n)}let(e,r,n){return this._def(Ve.varKinds.let,e,r,n)}var(e,r,n){return this._def(Ve.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new qn(e,r,n))}add(e,r){return this._leafNode(new Ti(e,A.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==F.nil&&this._leafNode(new Mi(e)),this}object(...e){let r=["{"];for(let[n,i]of e)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,F.addCodeArg)(r,i));return r.push("}"),new F._Code(r)}if(e,r,n){if(this._blockNode(new An(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new An(e))}else(){return this._elseNode(new ki)}endIf(){return this._endBlockNode(An,ki)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Ai(e),r)}forRange(e,r,n,i,a=this.opts.es5?Ve.varKinds.var:Ve.varKinds.let){let s=this._scope.toName(e);return this._for(new qi(a,s,r,n),()=>i(s))}forOf(e,r,n,i=Ve.varKinds.const){let a=this._scope.toName(e);if(this.opts.es5){let s=r instanceof F.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,F._)`${s}.length`,c=>{this.var(a,(0,F._)`${s}[${c}]`),n(a)})}return this._for(new xn("of",i,a,r),()=>n(a))}forIn(e,r,n,i=this.opts.es5?Ve.varKinds.var:Ve.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,F._)`Object.keys(${r})`,n);let a=this._scope.toName(e);return this._for(new xn("in",i,a,r),()=>n(a))}endFor(){return this._endBlockNode(Un)}label(e){return this._leafNode(new Ni(e))}break(e){return this._leafNode(new Di(e))}return(e){let r=new Jo;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Jo)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new xi;if(this._blockNode(i),this.code(e),r){let a=this.name("e");this._currNode=i.catch=new Bo(a),r(a)}return n&&(this._currNode=i.finally=new Yo,this.code(n)),this._endBlockNode(Bo,Yo)}throw(e){return this._leafNode(new Ri(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=F.nil,n,i){return this._blockNode(new Go(e,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(Go)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof An))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};A.CodeGen=Vi;function At(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Vn(t,e){return e instanceof F._CodeOrName?At(t,e.names):t}function fr(t,e,r){if(t instanceof F.Name)return n(t);if(!i(t))return t;return new F._Code(t._items.reduce((a,s)=>(s instanceof F.Name&&(s=n(s)),s instanceof F._Code?a.push(...s._items):a.push(s),a),[]));function n(a){let s=r[a.str];return s===void 0||e[a.str]!==1?a:(delete e[a.str],s)}function i(a){return a instanceof F._Code&&a._items.some(s=>s instanceof F.Name&&e[s.str]===1&&r[s.str]!==void 0)}}function Md(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Wo(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,F._)`!${Fi(t)}`}A.not=Wo;var jd=Qo(A.operators.AND);function kd(...t){return t.reduce(jd)}A.and=kd;var Ad=Qo(A.operators.OR);function qd(...t){return t.reduce(Ad)}A.or=qd;function Qo(t){return(e,r)=>e===F.nil?r:r===F.nil?e:(0,F._)`${Fi(e)} ${t} ${Fi(r)}`}function Fi(t){return t instanceof F.Name?t:(0,F._)`(${t})`}});var V=$(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.checkStrictMode=q.getErrorPath=q.Type=q.useFunc=q.setEvaluated=q.evaluatedPropsToName=q.mergeEvaluated=q.eachItem=q.unescapeJsonPointer=q.escapeJsonPointer=q.escapeFragment=q.unescapeFragment=q.schemaRefOrVal=q.schemaHasRulesButRef=q.schemaHasRules=q.checkUnknownRules=q.alwaysValidSchema=q.toHash=void 0;var ee=D(),xd=qr();function Vd(t){let e={};for(let r of t)e[r]=!0;return e}q.toHash=Vd;function Fd(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(ec(t,e),!tc(e,t.self.RULES.all))}q.alwaysValidSchema=Fd;function ec(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let i=n.RULES.keywords;for(let a in e)i[a]||ac(t,`unknown keyword: "${a}"`)}q.checkUnknownRules=ec;function tc(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}q.schemaHasRules=tc;function Ud(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}q.schemaHasRulesButRef=Ud;function Ld({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ee._)`${r}`}return(0,ee._)`${t}${e}${(0,ee.getProperty)(n)}`}q.schemaRefOrVal=Ld;function zd(t){return rc(decodeURIComponent(t))}q.unescapeFragment=zd;function Kd(t){return encodeURIComponent(Ui(t))}q.escapeFragment=Kd;function Ui(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}q.escapeJsonPointer=Ui;function rc(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}q.unescapeJsonPointer=rc;function Hd(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}q.eachItem=Hd;function Xo({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,a,s,c)=>{let u=s===void 0?a:s instanceof ee.Name?(a instanceof ee.Name?t(i,a,s):e(i,a,s),s):a instanceof ee.Name?(e(i,s,a),a):r(a,s);return c===ee.Name&&!(u instanceof ee.Name)?n(i,u):u}}q.mergeEvaluated={props:Xo({mergeNames:(t,e,r)=>t.if((0,ee._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,ee._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,ee._)`${r} || {}`).code((0,ee._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,ee._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,ee._)`${r} || {}`),Li(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:G(G({},t),e),resultToName:nc}),items:Xo({mergeNames:(t,e,r)=>t.if((0,ee._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,ee._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,ee._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,ee._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function nc(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,ee._)`{}`);return e!==void 0&&Li(t,r,e),r}q.evaluatedPropsToName=nc;function Li(t,e,r){Object.keys(r).forEach(n=>t.assign((0,ee._)`${e}${(0,ee.getProperty)(n)}`,!0))}q.setEvaluated=Li;var Zo={};function Gd(t,e){return t.scopeValue("func",{ref:e,code:Zo[e.code]||(Zo[e.code]=new xd._Code(e.code))})}q.useFunc=Gd;var ic;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(ic=q.Type||(q.Type={}));function Jd(t,e,r){if(t instanceof ee.Name){let n=e===ic.Num;return r?n?(0,ee._)`"[" + ${t} + "]"`:(0,ee._)`"['" + ${t} + "']"`:n?(0,ee._)`"/" + ${t}`:(0,ee._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ee.getProperty)(t).toString():"/"+Ui(t)}q.getErrorPath=Jd;function ac(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}q.checkStrictMode=ac});var je=$(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var ve=D(),Bd={data:new ve.Name("data"),valCxt:new ve.Name("valCxt"),instancePath:new ve.Name("instancePath"),parentData:new ve.Name("parentData"),parentDataProperty:new ve.Name("parentDataProperty"),rootData:new ve.Name("rootData"),dynamicAnchors:new ve.Name("dynamicAnchors"),vErrors:new ve.Name("vErrors"),errors:new ve.Name("errors"),this:new ve.Name("this"),self:new ve.Name("self"),scope:new ve.Name("scope"),json:new ve.Name("json"),jsonPos:new ve.Name("jsonPos"),jsonLen:new ve.Name("jsonLen"),jsonPart:new ve.Name("jsonPart")};zi.default=Bd});var Vr=$(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.extendErrors=ge.resetErrorsCount=ge.reportExtraError=ge.reportError=ge.keyword$DataError=ge.keywordError=void 0;var L=D(),Ln=V(),_e=je();ge.keywordError={message:({keyword:t})=>(0,L.str)`must pass "${t}" keyword validation`};ge.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,L.str)`"${t}" keyword must be ${e} ($data)`:(0,L.str)`"${t}" keyword is invalid ($data)`};function Yd(t,e=ge.keywordError,r,n){let{it:i}=t,{gen:a,compositeRule:s,allErrors:c}=i,u=cc(t,e,r);n??(s||c)?sc(a,u):oc(i,(0,L._)`[${u}]`)}ge.reportError=Yd;function Wd(t,e=ge.keywordError,r){let{it:n}=t,{gen:i,compositeRule:a,allErrors:s}=n,c=cc(t,e,r);sc(i,c),a||s||oc(n,_e.default.vErrors)}ge.reportExtraError=Wd;function Qd(t,e){t.assign(_e.default.errors,e),t.if((0,L._)`${_e.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,L._)`${_e.default.vErrors}.length`,e),()=>t.assign(_e.default.vErrors,null)))}ge.resetErrorsCount=Qd;function Xd({gen:t,keyword:e,schemaValue:r,data:n,errsCount:i,it:a}){if(i===void 0)throw new Error("ajv implementation error");let s=t.name("err");t.forRange("i",i,_e.default.errors,c=>{t.const(s,(0,L._)`${_e.default.vErrors}[${c}]`),t.if((0,L._)`${s}.instancePath === undefined`,()=>t.assign((0,L._)`${s}.instancePath`,(0,L.strConcat)(_e.default.instancePath,a.errorPath))),t.assign((0,L._)`${s}.schemaPath`,(0,L.str)`${a.errSchemaPath}/${e}`),a.opts.verbose&&(t.assign((0,L._)`${s}.schema`,r),t.assign((0,L._)`${s}.data`,n))})}ge.extendErrors=Xd;function sc(t,e){let r=t.const("err",e);t.if((0,L._)`${_e.default.vErrors} === null`,()=>t.assign(_e.default.vErrors,(0,L._)`[${r}]`),(0,L._)`${_e.default.vErrors}.push(${r})`),t.code((0,L._)`${_e.default.errors}++`)}function oc(t,e){let{gen:r,validateName:n,schemaEnv:i}=t;i.$async?r.throw((0,L._)`new ${t.ValidationError}(${e})`):(r.assign((0,L._)`${n}.errors`,e),r.return(!1))}var qt={keyword:new L.Name("keyword"),schemaPath:new L.Name("schemaPath"),params:new L.Name("params"),propertyName:new L.Name("propertyName"),message:new L.Name("message"),schema:new L.Name("schema"),parentSchema:new L.Name("parentSchema")};function cc(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,L._)`{}`:Zd(t,e,r)}function Zd(t,e,r={}){let{gen:n,it:i}=t,a=[ef(i,r),tf(t,r)];return rf(t,e,a),n.object(...a)}function ef({errorPath:t},{instancePath:e}){let r=e?(0,L.str)`${t}${(0,Ln.getErrorPath)(e,Ln.Type.Str)}`:t;return[_e.default.instancePath,(0,L.strConcat)(_e.default.instancePath,r)]}function tf({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let i=n?e:(0,L.str)`${e}/${t}`;return r&&(i=(0,L.str)`${i}${(0,Ln.getErrorPath)(r,Ln.Type.Str)}`),[qt.schemaPath,i]}function rf(t,{params:e,message:r},n){let{keyword:i,data:a,schemaValue:s,it:c}=t,{opts:u,propertyName:f,topSchemaRef:p,schemaPath:h}=c;n.push([qt.keyword,i],[qt.params,typeof e=="function"?e(t):e||(0,L._)`{}`]),u.messages&&n.push([qt.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([qt.schema,s],[qt.parentSchema,(0,L._)`${p}${h}`],[_e.default.data,a]),f&&n.push([qt.propertyName,f])}});var uc=$(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.boolOrEmptySchema=pr.topBoolOrEmptySchema=void 0;var nf=Vr(),af=D(),sf=je(),of={message:"boolean schema is false"};function cf(t){let{gen:e,schema:r,validateName:n}=t;r===!1?lc(t,!1):typeof r=="object"&&r.$async===!0?e.return(sf.default.data):(e.assign((0,af._)`${n}.errors`,null),e.return(!0))}pr.topBoolOrEmptySchema=cf;function lf(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),lc(t)):r.var(e,!0)}pr.boolOrEmptySchema=lf;function lc(t,e){let{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,nf.reportError)(i,of,void 0,e)}});var Ki=$(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.getRules=mr.isJSONType=void 0;var uf=["string","number","integer","boolean","null","object","array"],df=new Set(uf);function ff(t){return typeof t=="string"&&df.has(t)}mr.isJSONType=ff;function pf(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:ae(G({},t),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}mr.getRules=pf});var Hi=$(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.shouldUseRule=yt.shouldUseGroup=yt.schemaHasRulesForType=void 0;function mf({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&dc(t,n)}yt.schemaHasRulesForType=mf;function dc(t,e){return e.rules.some(r=>fc(t,r))}yt.shouldUseGroup=dc;function fc(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}yt.shouldUseRule=fc});var Ur=$(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.reportTypeError=fe.checkDataTypes=fe.checkDataType=fe.coerceAndCheckDataType=fe.getJSONTypes=fe.getSchemaTypes=fe.DataType=void 0;var hf=Ki(),vf=Hi(),gf=Vr(),M=D(),pc=V(),Fr;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Fr=fe.DataType||(fe.DataType={}));function yf(t){let e=mc(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}fe.getSchemaTypes=yf;function mc(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(hf.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}fe.getJSONTypes=mc;function _f(t,e){let{gen:r,data:n,opts:i}=t,a=$f(e,i.coerceTypes),s=e.length>0&&!(a.length===0&&e.length===1&&(0,vf.schemaHasRulesForType)(t,e[0]));if(s){let c=Ji(e,n,i.strictNumbers,Fr.Wrong);r.if(c,()=>{a.length?wf(t,e,a):Bi(t)})}return s}fe.coerceAndCheckDataType=_f;var hc=new Set(["string","number","integer","boolean","null"]);function $f(t,e){return e?t.filter(r=>hc.has(r)||e==="array"&&r==="array"):[]}function wf(t,e,r){let{gen:n,data:i,opts:a}=t,s=n.let("dataType",(0,M._)`typeof ${i}`),c=n.let("coerced",(0,M._)`undefined`);a.coerceTypes==="array"&&n.if((0,M._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,M._)`${i}[0]`).assign(s,(0,M._)`typeof ${i}`).if(Ji(e,i,a.strictNumbers),()=>n.assign(c,i))),n.if((0,M._)`${c} !== undefined`);for(let f of r)(hc.has(f)||f==="array"&&a.coerceTypes==="array")&&u(f);n.else(),Bi(t),n.endIf(),n.if((0,M._)`${c} !== undefined`,()=>{n.assign(i,c),Ef(t,c)});function u(f){switch(f){case"string":n.elseIf((0,M._)`${s} == "number" || ${s} == "boolean"`).assign(c,(0,M._)`"" + ${i}`).elseIf((0,M._)`${i} === null`).assign(c,(0,M._)`""`);return;case"number":n.elseIf((0,M._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(c,(0,M._)`+${i}`);return;case"integer":n.elseIf((0,M._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(c,(0,M._)`+${i}`);return;case"boolean":n.elseIf((0,M._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(c,!1).elseIf((0,M._)`${i} === "true" || ${i} === 1`).assign(c,!0);return;case"null":n.elseIf((0,M._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(c,null);return;case"array":n.elseIf((0,M._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(c,(0,M._)`[${i}]`)}}}function Ef({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,M._)`${e} !== undefined`,()=>t.assign((0,M._)`${e}[${r}]`,n))}function Gi(t,e,r,n=Fr.Correct){let i=n===Fr.Correct?M.operators.EQ:M.operators.NEQ,a;switch(t){case"null":return(0,M._)`${e} ${i} null`;case"array":a=(0,M._)`Array.isArray(${e})`;break;case"object":a=(0,M._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=s((0,M._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=s();break;default:return(0,M._)`typeof ${e} ${i} ${t}`}return n===Fr.Correct?a:(0,M.not)(a);function s(c=M.nil){return(0,M.and)((0,M._)`typeof ${e} == "number"`,c,r?(0,M._)`isFinite(${e})`:M.nil)}}fe.checkDataType=Gi;function Ji(t,e,r,n){if(t.length===1)return Gi(t[0],e,r,n);let i,a=(0,pc.toHash)(t);if(a.array&&a.object){let s=(0,M._)`typeof ${e} != "object"`;i=a.null?s:(0,M._)`!${e} || ${s}`,delete a.null,delete a.array,delete a.object}else i=M.nil;a.number&&delete a.integer;for(let s in a)i=(0,M.and)(i,Gi(s,e,r,n));return i}fe.checkDataTypes=Ji;var bf={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,M._)`{type: ${t}}`:(0,M._)`{type: ${e}}`};function Bi(t){let e=Sf(t);(0,gf.reportError)(e,bf)}fe.reportTypeError=Bi;function Sf(t){let{gen:e,data:r,schema:n}=t,i=(0,pc.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}});var gc=$(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.assignDefaults=void 0;var hr=D(),Cf=V();function Pf(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let i in r)vc(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,a)=>vc(t,a,i.default))}zn.assignDefaults=Pf;function vc(t,e,r){let{gen:n,compositeRule:i,data:a,opts:s}=t;if(r===void 0)return;let c=(0,hr._)`${a}${(0,hr.getProperty)(e)}`;if(i){(0,Cf.checkStrictMode)(t,`default is ignored for: ${c}`);return}let u=(0,hr._)`${c} === undefined`;s.useDefaults==="empty"&&(u=(0,hr._)`${u} || ${c} === null || ${c} === ""`),n.if(u,(0,hr._)`${c} = ${(0,hr.stringify)(r)}`)}});var ke=$(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.validateUnion=X.validateArray=X.usePattern=X.callValidateCode=X.schemaProperties=X.allSchemaProperties=X.noPropertyInData=X.propertyInData=X.isOwnProperty=X.hasPropFunc=X.reportMissingProp=X.checkMissingProp=X.checkReportMissingProp=void 0;var te=D(),Yi=V(),_t=je(),Of=V();function If(t,e){let{gen:r,data:n,it:i}=t;r.if(Qi(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,te._)`${e}`},!0),t.error()})}X.checkReportMissingProp=If;function Tf({gen:t,data:e,it:{opts:r}},n,i){return(0,te.or)(...n.map(a=>(0,te.and)(Qi(t,e,a,r.ownProperties),(0,te._)`${i} = ${a}`)))}X.checkMissingProp=Tf;function Nf(t,e){t.setParams({missingProperty:e},!0),t.error()}X.reportMissingProp=Nf;function yc(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,te._)`Object.prototype.hasOwnProperty`})}X.hasPropFunc=yc;function Wi(t,e,r){return(0,te._)`${yc(t)}.call(${e}, ${r})`}X.isOwnProperty=Wi;function Df(t,e,r,n){let i=(0,te._)`${e}${(0,te.getProperty)(r)} !== undefined`;return n?(0,te._)`${i} && ${Wi(t,e,r)}`:i}X.propertyInData=Df;function Qi(t,e,r,n){let i=(0,te._)`${e}${(0,te.getProperty)(r)} === undefined`;return n?(0,te.or)(i,(0,te.not)(Wi(t,e,r))):i}X.noPropertyInData=Qi;function _c(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}X.allSchemaProperties=_c;function Rf(t,e){return _c(e).filter(r=>!(0,Yi.alwaysValidSchema)(t,e[r]))}X.schemaProperties=Rf;function Mf({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:a},it:s},c,u,f){let p=f?(0,te._)`${t}, ${e}, ${n}${i}`:e,h=[[_t.default.instancePath,(0,te.strConcat)(_t.default.instancePath,a)],[_t.default.parentData,s.parentData],[_t.default.parentDataProperty,s.parentDataProperty],[_t.default.rootData,_t.default.rootData]];s.opts.dynamicRef&&h.push([_t.default.dynamicAnchors,_t.default.dynamicAnchors]);let w=(0,te._)`${p}, ${r.object(...h)}`;return u!==te.nil?(0,te._)`${c}.call(${u}, ${w})`:(0,te._)`${c}(${w})`}X.callValidateCode=Mf;var jf=(0,te._)`new RegExp`;function kf({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,a=i(r,n);return t.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,te._)`${i.code==="new RegExp"?jf:(0,Of.useFunc)(t,i)}(${r}, ${n})`})}X.usePattern=kf;function Af(t){let{gen:e,data:r,keyword:n,it:i}=t,a=e.name("valid");if(i.allErrors){let c=e.let("valid",!0);return s(()=>e.assign(c,!1)),c}return e.var(a,!0),s(()=>e.break()),a;function s(c){let u=e.const("len",(0,te._)`${r}.length`);e.forRange("i",0,u,f=>{t.subschema({keyword:n,dataProp:f,dataPropType:Yi.Type.Num},a),e.if((0,te.not)(a),c)})}}X.validateArray=Af;function qf(t){let{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Yi.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;let s=e.let("valid",!1),c=e.name("_valid");e.block(()=>r.forEach((u,f)=>{let p=t.subschema({keyword:n,schemaProp:f,compositeRule:!0},c);e.assign(s,(0,te._)`${s} || ${c}`),t.mergeValidEvaluated(p,c)||e.if((0,te.not)(s))})),t.result(s,()=>t.reset(),()=>t.error(!0))}X.validateUnion=qf});var Ec=$(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.validateKeywordUsage=et.validSchemaType=et.funcKeywordCode=et.macroKeywordCode=void 0;var $e=D(),xt=je(),xf=ke(),Vf=Vr();function Ff(t,e){let{gen:r,keyword:n,schema:i,parentSchema:a,it:s}=t,c=e.macro.call(s.self,i,a,s),u=wc(r,n,c);s.opts.validateSchema!==!1&&s.self.validateSchema(c,!0);let f=r.name("valid");t.subschema({schema:c,schemaPath:$e.nil,errSchemaPath:`${s.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},f),t.pass(f,()=>t.error(!0))}et.macroKeywordCode=Ff;function Uf(t,e){var r;let{gen:n,keyword:i,schema:a,parentSchema:s,$data:c,it:u}=t;zf(u,e);let f=!c&&e.compile?e.compile.call(u.self,a,s,u):e.validate,p=wc(n,i,f),h=n.let("valid");t.block$data(h,w),t.ok((r=e.valid)!==null&&r!==void 0?r:h);function w(){if(e.errors===!1)g(),e.modifying&&$c(t),E(()=>t.error());else{let b=e.async?_():y();e.modifying&&$c(t),E(()=>Lf(t,b))}}function _(){let b=n.let("ruleErrs",null);return n.try(()=>g((0,$e._)`await `),x=>n.assign(h,!1).if((0,$e._)`${x} instanceof ${u.ValidationError}`,()=>n.assign(b,(0,$e._)`${x}.errors`),()=>n.throw(x))),b}function y(){let b=(0,$e._)`${p}.errors`;return n.assign(b,null),g($e.nil),b}function g(b=e.async?(0,$e._)`await `:$e.nil){let x=u.opts.passContext?xt.default.this:xt.default.self,j=!("compile"in e&&!c||e.schema===!1);n.assign(h,(0,$e._)`${b}${(0,xf.callValidateCode)(t,p,x,j)}`,e.modifying)}function E(b){var x;n.if((0,$e.not)((x=e.valid)!==null&&x!==void 0?x:h),b)}}et.funcKeywordCode=Uf;function $c(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,$e._)`${n.parentData}[${n.parentDataProperty}]`))}function Lf(t,e){let{gen:r}=t;r.if((0,$e._)`Array.isArray(${e})`,()=>{r.assign(xt.default.vErrors,(0,$e._)`${xt.default.vErrors} === null ? ${e} : ${xt.default.vErrors}.concat(${e})`).assign(xt.default.errors,(0,$e._)`${xt.default.vErrors}.length`),(0,Vf.extendErrors)(t)},()=>t.error())}function zf({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function wc(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,$e.stringify)(r)})}function Kf(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}et.validSchemaType=Kf;function Hf({schema:t,opts:e,self:r,errSchemaPath:n},i,a){if(Array.isArray(i.keyword)?!i.keyword.includes(a):i.keyword!==a)throw new Error("ajv implementation error");let s=i.dependencies;if(s?.some(c=>!Object.prototype.hasOwnProperty.call(t,c)))throw new Error(`parent schema must have dependencies of ${a}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[a])){let u=`keyword "${a}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}et.validateKeywordUsage=Hf});var Sc=$($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.extendSubschemaMode=$t.extendSubschemaData=$t.getSubschema=void 0;var tt=D(),bc=V();function Gf(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:a,topSchemaRef:s}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let c=t.schema[e];return r===void 0?{schema:c,schemaPath:(0,tt._)`${t.schemaPath}${(0,tt.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:c[r],schemaPath:(0,tt._)`${t.schemaPath}${(0,tt.getProperty)(e)}${(0,tt.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,bc.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||a===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:s,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}$t.getSubschema=Gf;function Jf(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:a,propertyName:s}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=e;if(r!==void 0){let{errorPath:f,dataPathArr:p,opts:h}=e,w=c.let("data",(0,tt._)`${e.data}${(0,tt.getProperty)(r)}`,!0);u(w),t.errorPath=(0,tt.str)`${f}${(0,bc.getErrorPath)(r,n,h.jsPropertySyntax)}`,t.parentDataProperty=(0,tt._)`${r}`,t.dataPathArr=[...p,t.parentDataProperty]}if(i!==void 0){let f=i instanceof tt.Name?i:c.let("data",i,!0);u(f),s!==void 0&&(t.propertyName=s)}a&&(t.dataTypes=a);function u(f){t.data=f,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,f]}}$t.extendSubschemaData=Jf;function Bf(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:a}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),a!==void 0&&(t.allErrors=a),t.jtdDiscriminator=e,t.jtdMetadata=r}$t.extendSubschemaMode=Bf});var Xi=$((jy,Cc)=>{"use strict";Cc.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var s=a[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}});var Oc=$((ky,Pc)=>{"use strict";var wt=Pc.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};Kn(e,n,i,t,"",t)};wt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};wt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};wt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};wt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Kn(t,e,r,n,i,a,s,c,u,f){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,a,s,c,u,f);for(var p in n){var h=n[p];if(Array.isArray(h)){if(p in wt.arrayKeywords)for(var w=0;w<h.length;w++)Kn(t,e,r,h[w],i+"/"+p+"/"+w,a,i,p,n,w)}else if(p in wt.propsKeywords){if(h&&typeof h=="object")for(var _ in h)Kn(t,e,r,h[_],i+"/"+p+"/"+Yf(_),a,i,p,n,_)}else(p in wt.keywords||t.allKeys&&!(p in wt.skipKeywords))&&Kn(t,e,r,h,i+"/"+p,a,i,p,n)}r(n,i,a,s,c,u,f)}}function Yf(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Lr=$(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.getSchemaRefs=Ee.resolveUrl=Ee.normalizeId=Ee._getFullPath=Ee.getFullPath=Ee.inlineRef=void 0;var Wf=V(),Qf=Xi(),Xf=Oc(),Zf=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ep(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Zi(t):e?Ic(t)<=e:!1}Ee.inlineRef=ep;var tp=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Zi(t){for(let e in t){if(tp.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Zi)||typeof r=="object"&&Zi(r))return!0}return!1}function Ic(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Zf.has(r)&&(typeof t[r]=="object"&&(0,Wf.eachItem)(t[r],n=>e+=Ic(n)),e===1/0))return 1/0}return e}function Tc(t,e="",r){r!==!1&&(e=vr(e));let n=t.parse(e);return Nc(t,n)}Ee.getFullPath=Tc;function Nc(t,e){return t.serialize(e).split("#")[0]+"#"}Ee._getFullPath=Nc;var rp=/#\/?$/;function vr(t){return t?t.replace(rp,""):""}Ee.normalizeId=vr;function np(t,e,r){return r=vr(r),t.resolve(e,r)}Ee.resolveUrl=np;var ip=/^[a-z_][-a-z0-9._]*$/i;function ap(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=vr(t[r]||e),a={"":i},s=Tc(n,i,!1),c={},u=new Set;return Xf(t,{allKeys:!0},(h,w,_,y)=>{if(y===void 0)return;let g=s+w,E=a[y];typeof h[r]=="string"&&(E=b.call(this,h[r])),x.call(this,h.$anchor),x.call(this,h.$dynamicAnchor),a[w]=E;function b(j){let W=this.opts.uriResolver.resolve;if(j=vr(E?W(E,j):j),u.has(j))throw p(j);u.add(j);let I=this.refs[j];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?f(h,I.schema,j):j!==vr(g)&&(j[0]==="#"?(f(h,c[j],j),c[j]=h):this.refs[j]=g),j}function x(j){if(typeof j=="string"){if(!ip.test(j))throw new Error(`invalid anchor "${j}"`);b.call(this,`#${j}`)}}}),c;function f(h,w,_){if(w!==void 0&&!Qf(h,w))throw p(_)}function p(h){return new Error(`reference "${h}" resolves to more than one schema`)}}Ee.getSchemaRefs=ap});var Hr=$(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.getData=Et.KeywordCxt=Et.validateFunctionCode=void 0;var kc=uc(),Dc=Ur(),ta=Hi(),Hn=Ur(),sp=gc(),Kr=Ec(),ea=Sc(),C=D(),T=je(),op=Lr(),ut=V(),zr=Vr();function cp(t){if(xc(t)&&(Vc(t),qc(t))){dp(t);return}Ac(t,()=>(0,kc.topBoolOrEmptySchema)(t))}Et.validateFunctionCode=cp;function Ac({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},a){i.code.es5?t.func(e,(0,C._)`${T.default.data}, ${T.default.valCxt}`,n.$async,()=>{t.code((0,C._)`"use strict"; ${Rc(r,i)}`),up(t,i),t.code(a)}):t.func(e,(0,C._)`${T.default.data}, ${lp(i)}`,n.$async,()=>t.code(Rc(r,i)).code(a))}function lp(t){return(0,C._)`{${T.default.instancePath}="", ${T.default.parentData}, ${T.default.parentDataProperty}, ${T.default.rootData}=${T.default.data}${t.dynamicRef?(0,C._)`, ${T.default.dynamicAnchors}={}`:C.nil}}={}`}function up(t,e){t.if(T.default.valCxt,()=>{t.var(T.default.instancePath,(0,C._)`${T.default.valCxt}.${T.default.instancePath}`),t.var(T.default.parentData,(0,C._)`${T.default.valCxt}.${T.default.parentData}`),t.var(T.default.parentDataProperty,(0,C._)`${T.default.valCxt}.${T.default.parentDataProperty}`),t.var(T.default.rootData,(0,C._)`${T.default.valCxt}.${T.default.rootData}`),e.dynamicRef&&t.var(T.default.dynamicAnchors,(0,C._)`${T.default.valCxt}.${T.default.dynamicAnchors}`)},()=>{t.var(T.default.instancePath,(0,C._)`""`),t.var(T.default.parentData,(0,C._)`undefined`),t.var(T.default.parentDataProperty,(0,C._)`undefined`),t.var(T.default.rootData,T.default.data),e.dynamicRef&&t.var(T.default.dynamicAnchors,(0,C._)`{}`)})}function dp(t){let{schema:e,opts:r,gen:n}=t;Ac(t,()=>{r.$comment&&e.$comment&&Uc(t),vp(t),n.let(T.default.vErrors,null),n.let(T.default.errors,0),r.unevaluated&&fp(t),Fc(t),_p(t)})}function fp(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,C._)`${r}.evaluated`),e.if((0,C._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,C._)`${t.evaluated}.props`,(0,C._)`undefined`)),e.if((0,C._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,C._)`${t.evaluated}.items`,(0,C._)`undefined`))}function Rc(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,C._)`/*# sourceURL=${r} */`:C.nil}function pp(t,e){if(xc(t)&&(Vc(t),qc(t))){mp(t,e);return}(0,kc.boolOrEmptySchema)(t,e)}function qc({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function xc(t){return typeof t.schema!="boolean"}function mp(t,e){let{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&Uc(t),gp(t),yp(t);let a=n.const("_errs",T.default.errors);Fc(t,a),n.var(e,(0,C._)`${a} === ${T.default.errors}`)}function Vc(t){(0,ut.checkUnknownRules)(t),hp(t)}function Fc(t,e){if(t.opts.jtd)return Mc(t,[],!1,e);let r=(0,Dc.getSchemaTypes)(t.schema),n=(0,Dc.coerceAndCheckDataType)(t,r);Mc(t,r,!n,e)}function hp(t){let{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ut.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function vp(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ut.checkStrictMode)(t,"default is ignored in the schema root")}function gp(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,op.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function yp(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Uc({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){let a=r.$comment;if(i.$comment===!0)t.code((0,C._)`${T.default.self}.logger.log(${a})`);else if(typeof i.$comment=="function"){let s=(0,C.str)`${n}/$comment`,c=t.scopeValue("root",{ref:e.root});t.code((0,C._)`${T.default.self}.opts.$comment(${a}, ${s}, ${c}.schema)`)}}function _p(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:a}=t;r.$async?e.if((0,C._)`${T.default.errors} === 0`,()=>e.return(T.default.data),()=>e.throw((0,C._)`new ${i}(${T.default.vErrors})`)):(e.assign((0,C._)`${n}.errors`,T.default.vErrors),a.unevaluated&&$p(t),e.return((0,C._)`${T.default.errors} === 0`))}function $p({gen:t,evaluated:e,props:r,items:n}){r instanceof C.Name&&t.assign((0,C._)`${e}.props`,r),n instanceof C.Name&&t.assign((0,C._)`${e}.items`,n)}function Mc(t,e,r,n){let{gen:i,schema:a,data:s,allErrors:c,opts:u,self:f}=t,{RULES:p}=f;if(a.$ref&&(u.ignoreKeywordsWithRef||!(0,ut.schemaHasRulesButRef)(a,p))){i.block(()=>zc(t,"$ref",p.all.$ref.definition));return}u.jtd||wp(t,e),i.block(()=>{for(let w of p.rules)h(w);h(p.post)});function h(w){(0,ta.shouldUseGroup)(a,w)&&(w.type?(i.if((0,Hn.checkDataType)(w.type,s,u.strictNumbers)),jc(t,w),e.length===1&&e[0]===w.type&&r&&(i.else(),(0,Hn.reportTypeError)(t)),i.endIf()):jc(t,w),c||i.if((0,C._)`${T.default.errors} === ${n||0}`))}}function jc(t,e){let{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,sp.assignDefaults)(t,e.type),r.block(()=>{for(let a of e.rules)(0,ta.shouldUseRule)(n,a)&&zc(t,a.keyword,a.definition,e.type)})}function wp(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Ep(t,e),t.opts.allowUnionTypes||bp(t,e),Sp(t,t.dataTypes))}function Ep(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Lc(t.dataTypes,r)||ra(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Pp(t,e)}}function bp(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&ra(t,"use allowUnionTypes to allow union type keyword")}function Sp(t,e){let r=t.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,ta.shouldUseRule)(t.schema,i)){let{type:a}=i.definition;a.length&&!a.some(s=>Cp(e,s))&&ra(t,`missing type "${a.join(",")}" for keyword "${n}"`)}}}function Cp(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Lc(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Pp(t,e){let r=[];for(let n of t.dataTypes)Lc(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function ra(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ut.checkStrictMode)(t,e,t.opts.strictTypes)}var Gn=class{constructor(e,r,n){if((0,Kr.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ut.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Kc(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Kr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",T.default.errors))}result(e,r,n){this.failResult((0,C.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,C.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,C._)`${r} !== undefined && (${(0,C.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?zr.reportExtraError:zr.reportError)(this,this.def.error,r)}$dataError(){(0,zr.reportError)(this,this.def.$dataError||zr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,zr.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=C.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=C.nil,r=C.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:a,def:s}=this;n.if((0,C.or)((0,C._)`${i} === undefined`,r)),e!==C.nil&&n.assign(e,!0),(a.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==C.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:i,it:a}=this;return(0,C.or)(s(),c());function s(){if(n.length){if(!(r instanceof C.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,C._)`${(0,Hn.checkDataTypes)(u,r,a.opts.strictNumbers,Hn.DataType.Wrong)}`}return C.nil}function c(){if(i.validateSchema){let u=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,C._)`!${u}(${r})`}return C.nil}}subschema(e,r){let n=(0,ea.getSubschema)(this.it,e);(0,ea.extendSubschemaData)(n,this.it,e),(0,ea.extendSubschemaMode)(n,e);let i=ae(G(G({},this.it),n),{items:void 0,props:void 0});return pp(i,r),i}mergeEvaluated(e,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ut.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ut.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,C.Name)),!0}};Et.KeywordCxt=Gn;function zc(t,e,r,n){let i=new Gn(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,Kr.funcKeywordCode)(i,r):"macro"in r?(0,Kr.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,Kr.funcKeywordCode)(i,r)}var Op=/^\/(?:[^~]|~0|~1)*$/,Ip=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Kc(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,a;if(t==="")return T.default.rootData;if(t[0]==="/"){if(!Op.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,a=T.default.rootData}else{let f=Ip.exec(t);if(!f)throw new Error(`Invalid JSON-pointer: ${t}`);let p=+f[1];if(i=f[2],i==="#"){if(p>=e)throw new Error(u("property/index",p));return n[e-p]}if(p>e)throw new Error(u("data",p));if(a=r[e-p],!i)return a}let s=a,c=i.split("/");for(let f of c)f&&(a=(0,C._)`${a}${(0,C.getProperty)((0,ut.unescapeJsonPointer)(f))}`,s=(0,C._)`${s} && ${a}`);return s;function u(f,p){return`Cannot access ${f} ${p} levels up, current level is ${e}`}}Et.getData=Kc});var Jn=$(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});var na=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};ia.default=na});var Bn=$(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var aa=Lr(),sa=class extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,aa.resolveUrl)(e,r,n),this.missingSchema=(0,aa.normalizeId)((0,aa.getFullPath)(e,this.missingRef))}};oa.default=sa});var Gr=$(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.resolveSchema=Ae.getCompilingSchema=Ae.resolveRef=Ae.compileSchema=Ae.SchemaEnv=void 0;var Fe=D(),Tp=Jn(),Vt=je(),Ue=Lr(),Hc=V(),Np=Hr(),gr=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ue.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Ae.SchemaEnv=gr;function la(t){let e=Gc.call(this,t);if(e)return e;let r=(0,Ue.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:a}=this.opts,s=new Fe.CodeGen(this.scope,{es5:n,lines:i,ownProperties:a}),c;t.$async&&(c=s.scopeValue("Error",{ref:Tp.default,code:(0,Fe._)`require("ajv/dist/runtime/validation_error").default`}));let u=s.scopeName("validate");t.validateName=u;let f={gen:s,allErrors:this.opts.allErrors,data:Vt.default.data,parentData:Vt.default.parentData,parentDataProperty:Vt.default.parentDataProperty,dataNames:[Vt.default.data],dataPathArr:[Fe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Fe.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:c,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Fe.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Fe._)`""`,opts:this.opts,self:this},p;try{this._compilations.add(t),(0,Np.validateFunctionCode)(f),s.optimize(this.opts.code.optimize);let h=s.toString();p=`${s.scopeRefs(Vt.default.scope)}return ${h}`,this.opts.code.process&&(p=this.opts.code.process(p,t));let _=new Function(`${Vt.default.self}`,`${Vt.default.scope}`,p)(this,this.scope.get());if(this.scope.value(u,{ref:_}),_.errors=null,_.schema=t.schema,_.schemaEnv=t,t.$async&&(_.$async=!0),this.opts.code.source===!0&&(_.source={validateName:u,validateCode:h,scopeValues:s._values}),this.opts.unevaluated){let{props:y,items:g}=f;_.evaluated={props:y instanceof Fe.Name?void 0:y,items:g instanceof Fe.Name?void 0:g,dynamicProps:y instanceof Fe.Name,dynamicItems:g instanceof Fe.Name},_.source&&(_.source.evaluated=(0,Fe.stringify)(_.evaluated))}return t.validate=_,t}catch(h){throw delete t.validate,delete t.validateName,p&&this.logger.error("Error compiling schema, function code:",p),h}finally{this._compilations.delete(t)}}Ae.compileSchema=la;function Dp(t,e,r){var n;r=(0,Ue.resolveUrl)(this.opts.uriResolver,e,r);let i=t.refs[r];if(i)return i;let a=jp.call(this,t,r);if(a===void 0){let s=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:c}=this.opts;s&&(a=new gr({schema:s,schemaId:c,root:t,baseId:e}))}if(a!==void 0)return t.refs[r]=Rp.call(this,a)}Ae.resolveRef=Dp;function Rp(t){return(0,Ue.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:la.call(this,t)}function Gc(t){for(let e of this._compilations)if(Mp(e,t))return e}Ae.getCompilingSchema=Gc;function Mp(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function jp(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Yn.call(this,t,e)}function Yn(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Ue._getFullPath)(this.opts.uriResolver,r),i=(0,Ue.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return ca.call(this,r,t);let a=(0,Ue.normalizeId)(n),s=this.refs[a]||this.schemas[a];if(typeof s=="string"){let c=Yn.call(this,t,s);return typeof c?.schema!="object"?void 0:ca.call(this,r,c)}if(typeof s?.schema=="object"){if(s.validate||la.call(this,s),a===(0,Ue.normalizeId)(e)){let{schema:c}=s,{schemaId:u}=this.opts,f=c[u];return f&&(i=(0,Ue.resolveUrl)(this.opts.uriResolver,i,f)),new gr({schema:c,schemaId:u,root:t,baseId:i})}return ca.call(this,r,s)}}Ae.resolveSchema=Yn;var kp=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function ca(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let c of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,Hc.unescapeFragment)(c)];if(u===void 0)return;r=u;let f=typeof r=="object"&&r[this.opts.schemaId];!kp.has(c)&&f&&(e=(0,Ue.resolveUrl)(this.opts.uriResolver,e,f))}let a;if(typeof r!="boolean"&&r.$ref&&!(0,Hc.schemaHasRulesButRef)(r,this.RULES)){let c=(0,Ue.resolveUrl)(this.opts.uriResolver,e,r.$ref);a=Yn.call(this,n,c)}let{schemaId:s}=this.opts;if(a=a||new gr({schema:r,schemaId:s,root:n,baseId:e}),a.schema!==a.root.schema)return a}});var Jc=$((Ly,Ap)=>{Ap.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Yc=$((Wn,Bc)=>{"use strict";(function(t,e){typeof Wn=="object"&&typeof Bc<"u"?e(Wn):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Wn,function(t){"use strict";function e(){for(var l=arguments.length,o=Array(l),d=0;d<l;d++)o[d]=arguments[d];if(o.length>1){o[0]=o[0].slice(0,-1);for(var m=o.length-1,v=1;v<m;++v)o[v]=o[v].slice(1,-1);return o[m]=o[m].slice(1),o.join("")}else return o[0]}function r(l){return"(?:"+l+")"}function n(l){return l===void 0?"undefined":l===null?"null":Object.prototype.toString.call(l).split(" ").pop().split("]").shift().toLowerCase()}function i(l){return l.toUpperCase()}function a(l){return l!=null?l instanceof Array?l:typeof l.length!="number"||l.split||l.setInterval||l.call?[l]:Array.prototype.slice.call(l):[]}function s(l,o){var d=l;if(o)for(var m in o)d[m]=o[m];return d}function c(l){var o="[A-Za-z]",d="[\\x0D]",m="[0-9]",v="[\\x22]",S=e(m,"[A-Fa-f]"),R="[\\x0A]",z="[\\x20]",Y=r(r("%[EFef]"+S+"%"+S+S+"%"+S+S)+"|"+r("%[89A-Fa-f]"+S+"%"+S+S)+"|"+r("%"+S+S)),ce="[\\:\\/\\?\\#\\[\\]\\@]",U="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ne=e(ce,U),le=l?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",re=l?"[\\uE000-\\uF8FF]":"[]",H=e(o,m,"[\\-\\.\\_\\~]",le),ie=r(o+e(o,m,"[\\+\\-\\.]")+"*"),Q=r(r(Y+"|"+e(H,U,"[\\:]"))+"*"),Ot=r(r("25[0-5]")+"|"+r("2[0-4]"+m)+"|"+r("1"+m+m)+"|"+r("[1-9]"+m)+"|"+m),Se=r(r("25[0-5]")+"|"+r("2[0-4]"+m)+"|"+r("1"+m+m)+"|"+r("0?[1-9]"+m)+"|0?0?"+m),Te=r(Se+"\\."+Se+"\\."+Se+"\\."+Se),Z=r(S+"{1,4}"),Ce=r(r(Z+"\\:"+Z)+"|"+Te),Ne=r(r(Z+"\\:")+"{6}"+Ce),Je=r("\\:\\:"+r(Z+"\\:")+"{5}"+Ce),It=r(r(Z)+"?\\:\\:"+r(Z+"\\:")+"{4}"+Ce),at=r(r(r(Z+"\\:")+"{0,1}"+Z)+"?\\:\\:"+r(Z+"\\:")+"{3}"+Ce),Pr=r(r(r(Z+"\\:")+"{0,2}"+Z)+"?\\:\\:"+r(Z+"\\:")+"{2}"+Ce),fn=r(r(r(Z+"\\:")+"{0,3}"+Z)+"?\\:\\:"+Z+"\\:"+Ce),pn=r(r(r(Z+"\\:")+"{0,4}"+Z)+"?\\:\\:"+Ce),Bt=r(r(r(Z+"\\:")+"{0,5}"+Z)+"?\\:\\:"+Z),Yt=r(r(r(Z+"\\:")+"{0,6}"+Z)+"?\\:\\:"),st=r([Ne,Je,It,at,Pr,fn,pn,Bt,Yt].join("|")),Wt=r(r(H+"|"+Y)+"+"),yi=r(st+"\\%25"+Wt),Tt=r(st+r("\\%25|\\%(?!"+S+"{2})")+Wt),ud=r("[vV]"+S+"+\\."+e(H,U,"[\\:]")+"+"),dd=r("\\["+r(Tt+"|"+st+"|"+ud)+"\\]"),ks=r(r(Y+"|"+e(H,U))+"*"),Or=r(dd+"|"+Te+"(?!"+ks+")|"+ks),Ir=r(m+"*"),As=r(r(Q+"@")+"?"+Or+r("\\:"+Ir)+"?"),Tr=r(Y+"|"+e(H,U,"[\\:\\@]")),fd=r(Tr+"*"),qs=r(Tr+"+"),pd=r(r(Y+"|"+e(H,U,"[\\@]"))+"+"),ot=r(r("\\/"+fd)+"*"),Qt=r("\\/"+r(qs+ot)+"?"),_i=r(pd+ot),mn=r(qs+ot),Xt="(?!"+Tr+")",Dg=r(ot+"|"+Qt+"|"+_i+"|"+mn+"|"+Xt),Zt=r(r(Tr+"|"+e("[\\/\\?]",re))+"*"),Nr=r(r(Tr+"|[\\/\\?]")+"*"),xs=r(r("\\/\\/"+As+ot)+"|"+Qt+"|"+mn+"|"+Xt),md=r(ie+"\\:"+xs+r("\\?"+Zt)+"?"+r("\\#"+Nr)+"?"),hd=r(r("\\/\\/"+As+ot)+"|"+Qt+"|"+_i+"|"+Xt),vd=r(hd+r("\\?"+Zt)+"?"+r("\\#"+Nr)+"?"),Rg=r(md+"|"+vd),Mg=r(ie+"\\:"+xs+r("\\?"+Zt)+"?"),jg="^("+ie+")\\:"+r(r("\\/\\/("+r("("+Q+")@")+"?("+Or+")"+r("\\:("+Ir+")")+"?)")+"?("+ot+"|"+Qt+"|"+mn+"|"+Xt+")")+r("\\?("+Zt+")")+"?"+r("\\#("+Nr+")")+"?$",kg="^(){0}"+r(r("\\/\\/("+r("("+Q+")@")+"?("+Or+")"+r("\\:("+Ir+")")+"?)")+"?("+ot+"|"+Qt+"|"+_i+"|"+Xt+")")+r("\\?("+Zt+")")+"?"+r("\\#("+Nr+")")+"?$",Ag="^("+ie+")\\:"+r(r("\\/\\/("+r("("+Q+")@")+"?("+Or+")"+r("\\:("+Ir+")")+"?)")+"?("+ot+"|"+Qt+"|"+mn+"|"+Xt+")")+r("\\?("+Zt+")")+"?$",qg="^"+r("\\#("+Nr+")")+"?$",xg="^"+r("("+Q+")@")+"?("+Or+")"+r("\\:("+Ir+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",o,m,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",H,U),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",H,U),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",H,U),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",H,U),"g"),NOT_QUERY:new RegExp(e("[^\\%]",H,U,"[\\:\\@\\/\\?]",re),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",H,U,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",H,U),"g"),UNRESERVED:new RegExp(H,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",H,ne),"g"),PCT_ENCODED:new RegExp(Y,"g"),IPV4ADDRESS:new RegExp("^("+Te+")$"),IPV6ADDRESS:new RegExp("^\\[?("+st+")"+r(r("\\%25|\\%(?!"+S+"{2})")+"("+Wt+")")+"?\\]?$")}}var u=c(!1),f=c(!0),p=function(){function l(o,d){var m=[],v=!0,S=!1,R=void 0;try{for(var z=o[Symbol.iterator](),Y;!(v=(Y=z.next()).done)&&(m.push(Y.value),!(d&&m.length===d));v=!0);}catch(ce){S=!0,R=ce}finally{try{!v&&z.return&&z.return()}finally{if(S)throw R}}return m}return function(o,d){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return l(o,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(l){if(Array.isArray(l)){for(var o=0,d=Array(l.length);o<l.length;o++)d[o]=l[o];return d}else return Array.from(l)},w=2147483647,_=36,y=1,g=26,E=38,b=700,x=72,j=128,W="-",I=/^xn--/,Oe=/[^\0-\x7E]/,dt=/[\x2E\u3002\uFF0E\uFF61]/g,br={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ct=_-y,he=Math.floor,Pt=String.fromCharCode;function ze(l){throw new RangeError(br[l])}function un(l,o){for(var d=[],m=l.length;m--;)d[m]=o(l[m]);return d}function dn(l,o){var d=l.split("@"),m="";d.length>1&&(m=d[0]+"@",l=d[1]),l=l.replace(dt,".");var v=l.split("."),S=un(v,o).join(".");return m+S}function gs(l){for(var o=[],d=0,m=l.length;d<m;){var v=l.charCodeAt(d++);if(v>=55296&&v<=56319&&d<m){var S=l.charCodeAt(d++);(S&64512)==56320?o.push(((v&1023)<<10)+(S&1023)+65536):(o.push(v),d--)}else o.push(v)}return o}var Fu=function(o){return String.fromCodePoint.apply(String,h(o))},Uu=function(o){return o-48<10?o-22:o-65<26?o-65:o-97<26?o-97:_},ys=function(o,d){return o+22+75*(o<26)-((d!=0)<<5)},_s=function(o,d,m){var v=0;for(o=m?he(o/b):o>>1,o+=he(o/d);o>Ct*g>>1;v+=_)o=he(o/Ct);return he(v+(Ct+1)*o/(o+E))},$s=function(o){var d=[],m=o.length,v=0,S=j,R=x,z=o.lastIndexOf(W);z<0&&(z=0);for(var Y=0;Y<z;++Y)o.charCodeAt(Y)>=128&&ze("not-basic"),d.push(o.charCodeAt(Y));for(var ce=z>0?z+1:0;ce<m;){for(var U=v,ne=1,le=_;;le+=_){ce>=m&&ze("invalid-input");var re=Uu(o.charCodeAt(ce++));(re>=_||re>he((w-v)/ne))&&ze("overflow"),v+=re*ne;var H=le<=R?y:le>=R+g?g:le-R;if(re<H)break;var ie=_-H;ne>he(w/ie)&&ze("overflow"),ne*=ie}var Q=d.length+1;R=_s(v-U,Q,U==0),he(v/Q)>w-S&&ze("overflow"),S+=he(v/Q),v%=Q,d.splice(v++,0,S)}return String.fromCodePoint.apply(String,d)},ws=function(o){var d=[];o=gs(o);var m=o.length,v=j,S=0,R=x,z=!0,Y=!1,ce=void 0;try{for(var U=o[Symbol.iterator](),ne;!(z=(ne=U.next()).done);z=!0){var le=ne.value;le<128&&d.push(Pt(le))}}catch(Tt){Y=!0,ce=Tt}finally{try{!z&&U.return&&U.return()}finally{if(Y)throw ce}}var re=d.length,H=re;for(re&&d.push(W);H<m;){var ie=w,Q=!0,Ot=!1,Se=void 0;try{for(var Te=o[Symbol.iterator](),Z;!(Q=(Z=Te.next()).done);Q=!0){var Ce=Z.value;Ce>=v&&Ce<ie&&(ie=Ce)}}catch(Tt){Ot=!0,Se=Tt}finally{try{!Q&&Te.return&&Te.return()}finally{if(Ot)throw Se}}var Ne=H+1;ie-v>he((w-S)/Ne)&&ze("overflow"),S+=(ie-v)*Ne,v=ie;var Je=!0,It=!1,at=void 0;try{for(var Pr=o[Symbol.iterator](),fn;!(Je=(fn=Pr.next()).done);Je=!0){var pn=fn.value;if(pn<v&&++S>w&&ze("overflow"),pn==v){for(var Bt=S,Yt=_;;Yt+=_){var st=Yt<=R?y:Yt>=R+g?g:Yt-R;if(Bt<st)break;var Wt=Bt-st,yi=_-st;d.push(Pt(ys(st+Wt%yi,0))),Bt=he(Wt/yi)}d.push(Pt(ys(Bt,0))),R=_s(S,Ne,H==re),S=0,++H}}}catch(Tt){It=!0,at=Tt}finally{try{!Je&&Pr.return&&Pr.return()}finally{if(It)throw at}}++S,++v}return d.join("")},Lu=function(o){return dn(o,function(d){return I.test(d)?$s(d.slice(4).toLowerCase()):d})},zu=function(o){return dn(o,function(d){return Oe.test(d)?"xn--"+ws(d):d})},Kt={version:"2.1.0",ucs2:{decode:gs,encode:Fu},decode:$s,encode:ws,toASCII:zu,toUnicode:Lu},Ie={};function Ke(l){var o=l.charCodeAt(0),d=void 0;return o<16?d="%0"+o.toString(16).toUpperCase():o<128?d="%"+o.toString(16).toUpperCase():o<2048?d="%"+(o>>6|192).toString(16).toUpperCase()+"%"+(o&63|128).toString(16).toUpperCase():d="%"+(o>>12|224).toString(16).toUpperCase()+"%"+(o>>6&63|128).toString(16).toUpperCase()+"%"+(o&63|128).toString(16).toUpperCase(),d}function Ht(l){for(var o="",d=0,m=l.length;d<m;){var v=parseInt(l.substr(d+1,2),16);if(v<128)o+=String.fromCharCode(v),d+=3;else if(v>=194&&v<224){if(m-d>=6){var S=parseInt(l.substr(d+4,2),16);o+=String.fromCharCode((v&31)<<6|S&63)}else o+=l.substr(d,6);d+=6}else if(v>=224){if(m-d>=9){var R=parseInt(l.substr(d+4,2),16),z=parseInt(l.substr(d+7,2),16);o+=String.fromCharCode((v&15)<<12|(R&63)<<6|z&63)}else o+=l.substr(d,9);d+=9}else o+=l.substr(d,3),d+=3}return o}function mi(l,o){function d(m){var v=Ht(m);return v.match(o.UNRESERVED)?v:m}return l.scheme&&(l.scheme=String(l.scheme).replace(o.PCT_ENCODED,d).toLowerCase().replace(o.NOT_SCHEME,"")),l.userinfo!==void 0&&(l.userinfo=String(l.userinfo).replace(o.PCT_ENCODED,d).replace(o.NOT_USERINFO,Ke).replace(o.PCT_ENCODED,i)),l.host!==void 0&&(l.host=String(l.host).replace(o.PCT_ENCODED,d).toLowerCase().replace(o.NOT_HOST,Ke).replace(o.PCT_ENCODED,i)),l.path!==void 0&&(l.path=String(l.path).replace(o.PCT_ENCODED,d).replace(l.scheme?o.NOT_PATH:o.NOT_PATH_NOSCHEME,Ke).replace(o.PCT_ENCODED,i)),l.query!==void 0&&(l.query=String(l.query).replace(o.PCT_ENCODED,d).replace(o.NOT_QUERY,Ke).replace(o.PCT_ENCODED,i)),l.fragment!==void 0&&(l.fragment=String(l.fragment).replace(o.PCT_ENCODED,d).replace(o.NOT_FRAGMENT,Ke).replace(o.PCT_ENCODED,i)),l}function hi(l){return l.replace(/^0*(.*)/,"$1")||"0"}function vi(l,o){var d=l.match(o.IPV4ADDRESS)||[],m=p(d,2),v=m[1];return v?v.split(".").map(hi).join("."):l}function Es(l,o){var d=l.match(o.IPV6ADDRESS)||[],m=p(d,3),v=m[1],S=m[2];if(v){for(var R=v.toLowerCase().split("::").reverse(),z=p(R,2),Y=z[0],ce=z[1],U=ce?ce.split(":").map(hi):[],ne=Y.split(":").map(hi),le=o.IPV4ADDRESS.test(ne[ne.length-1]),re=le?7:8,H=ne.length-re,ie=Array(re),Q=0;Q<re;++Q)ie[Q]=U[Q]||ne[H+Q]||"";le&&(ie[re-1]=vi(ie[re-1],o));var Ot=ie.reduce(function(Ne,Je,It){if(!Je||Je==="0"){var at=Ne[Ne.length-1];at&&at.index+at.length===It?at.length++:Ne.push({index:It,length:1})}return Ne},[]),Se=Ot.sort(function(Ne,Je){return Je.length-Ne.length})[0],Te=void 0;if(Se&&Se.length>1){var Z=ie.slice(0,Se.index),Ce=ie.slice(Se.index+Se.length);Te=Z.join(":")+"::"+Ce.join(":")}else Te=ie.join(":");return S&&(Te+="%"+S),Te}else return l}var Ku=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Hu="".match(/(){0}/)[1]===void 0;function nt(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d={},m=o.iri!==!1?f:u;o.reference==="suffix"&&(l=(o.scheme?o.scheme+":":"")+"//"+l);var v=l.match(Ku);if(v){Hu?(d.scheme=v[1],d.userinfo=v[3],d.host=v[4],d.port=parseInt(v[5],10),d.path=v[6]||"",d.query=v[7],d.fragment=v[8],isNaN(d.port)&&(d.port=v[5])):(d.scheme=v[1]||void 0,d.userinfo=l.indexOf("@")!==-1?v[3]:void 0,d.host=l.indexOf("//")!==-1?v[4]:void 0,d.port=parseInt(v[5],10),d.path=v[6]||"",d.query=l.indexOf("?")!==-1?v[7]:void 0,d.fragment=l.indexOf("#")!==-1?v[8]:void 0,isNaN(d.port)&&(d.port=l.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?v[4]:void 0)),d.host&&(d.host=Es(vi(d.host,m),m)),d.scheme===void 0&&d.userinfo===void 0&&d.host===void 0&&d.port===void 0&&!d.path&&d.query===void 0?d.reference="same-document":d.scheme===void 0?d.reference="relative":d.fragment===void 0?d.reference="absolute":d.reference="uri",o.reference&&o.reference!=="suffix"&&o.reference!==d.reference&&(d.error=d.error||"URI is not a "+o.reference+" reference.");var S=Ie[(o.scheme||d.scheme||"").toLowerCase()];if(!o.unicodeSupport&&(!S||!S.unicodeSupport)){if(d.host&&(o.domainHost||S&&S.domainHost))try{d.host=Kt.toASCII(d.host.replace(m.PCT_ENCODED,Ht).toLowerCase())}catch(R){d.error=d.error||"Host's domain name can not be converted to ASCII via punycode: "+R}mi(d,u)}else mi(d,m);S&&S.parse&&S.parse(d,o)}else d.error=d.error||"URI can not be parsed.";return d}function Gu(l,o){var d=o.iri!==!1?f:u,m=[];return l.userinfo!==void 0&&(m.push(l.userinfo),m.push("@")),l.host!==void 0&&m.push(Es(vi(String(l.host),d),d).replace(d.IPV6ADDRESS,function(v,S,R){return"["+S+(R?"%25"+R:"")+"]"})),(typeof l.port=="number"||typeof l.port=="string")&&(m.push(":"),m.push(String(l.port))),m.length?m.join(""):void 0}var bs=/^\.\.?\//,Ss=/^\/\.(\/|$)/,Cs=/^\/\.\.(\/|$)/,Ju=/^\/?(?:.|\n)*?(?=\/|$)/;function Gt(l){for(var o=[];l.length;)if(l.match(bs))l=l.replace(bs,"");else if(l.match(Ss))l=l.replace(Ss,"/");else if(l.match(Cs))l=l.replace(Cs,"/"),o.pop();else if(l==="."||l==="..")l="";else{var d=l.match(Ju);if(d){var m=d[0];l=l.slice(m.length),o.push(m)}else throw new Error("Unexpected dot segment condition")}return o.join("")}function He(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=o.iri?f:u,m=[],v=Ie[(o.scheme||l.scheme||"").toLowerCase()];if(v&&v.serialize&&v.serialize(l,o),l.host&&!d.IPV6ADDRESS.test(l.host)){if(o.domainHost||v&&v.domainHost)try{l.host=o.iri?Kt.toUnicode(l.host):Kt.toASCII(l.host.replace(d.PCT_ENCODED,Ht).toLowerCase())}catch(z){l.error=l.error||"Host's domain name can not be converted to "+(o.iri?"Unicode":"ASCII")+" via punycode: "+z}}mi(l,d),o.reference!=="suffix"&&l.scheme&&(m.push(l.scheme),m.push(":"));var S=Gu(l,o);if(S!==void 0&&(o.reference!=="suffix"&&m.push("//"),m.push(S),l.path&&l.path.charAt(0)!=="/"&&m.push("/")),l.path!==void 0){var R=l.path;!o.absolutePath&&(!v||!v.absolutePath)&&(R=Gt(R)),S===void 0&&(R=R.replace(/^\/\//,"/%2F")),m.push(R)}return l.query!==void 0&&(m.push("?"),m.push(l.query)),l.fragment!==void 0&&(m.push("#"),m.push(l.fragment)),m.join("")}function Ps(l,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=arguments[3],v={};return m||(l=nt(He(l,d),d),o=nt(He(o,d),d)),d=d||{},!d.tolerant&&o.scheme?(v.scheme=o.scheme,v.userinfo=o.userinfo,v.host=o.host,v.port=o.port,v.path=Gt(o.path||""),v.query=o.query):(o.userinfo!==void 0||o.host!==void 0||o.port!==void 0?(v.userinfo=o.userinfo,v.host=o.host,v.port=o.port,v.path=Gt(o.path||""),v.query=o.query):(o.path?(o.path.charAt(0)==="/"?v.path=Gt(o.path):((l.userinfo!==void 0||l.host!==void 0||l.port!==void 0)&&!l.path?v.path="/"+o.path:l.path?v.path=l.path.slice(0,l.path.lastIndexOf("/")+1)+o.path:v.path=o.path,v.path=Gt(v.path)),v.query=o.query):(v.path=l.path,o.query!==void 0?v.query=o.query:v.query=l.query),v.userinfo=l.userinfo,v.host=l.host,v.port=l.port),v.scheme=l.scheme),v.fragment=o.fragment,v}function Bu(l,o,d){var m=s({scheme:"null"},d);return He(Ps(nt(l,m),nt(o,m),m,!0),m)}function Yu(l,o){return typeof l=="string"?l=He(nt(l,o),o):n(l)==="object"&&(l=nt(He(l,o),o)),l}function Wu(l,o,d){return typeof l=="string"?l=He(nt(l,d),d):n(l)==="object"&&(l=He(l,d)),typeof o=="string"?o=He(nt(o,d),d):n(o)==="object"&&(o=He(o,d)),l===o}function Qu(l,o){return l&&l.toString().replace(!o||!o.iri?u.ESCAPE:f.ESCAPE,Ke)}function it(l,o){return l&&l.toString().replace(!o||!o.iri?u.PCT_ENCODED:f.PCT_ENCODED,Ht)}var Sr={scheme:"http",domainHost:!0,parse:function(o,d){return o.host||(o.error=o.error||"HTTP URIs must have a host."),o},serialize:function(o,d){var m=String(o.scheme).toLowerCase()==="https";return(o.port===(m?443:80)||o.port==="")&&(o.port=void 0),o.path||(o.path="/"),o}},Os={scheme:"https",domainHost:Sr.domainHost,parse:Sr.parse,serialize:Sr.serialize};function Is(l){return typeof l.secure=="boolean"?l.secure:String(l.scheme).toLowerCase()==="wss"}var Cr={scheme:"ws",domainHost:!0,parse:function(o,d){var m=o;return m.secure=Is(m),m.resourceName=(m.path||"/")+(m.query?"?"+m.query:""),m.path=void 0,m.query=void 0,m},serialize:function(o,d){if((o.port===(Is(o)?443:80)||o.port==="")&&(o.port=void 0),typeof o.secure=="boolean"&&(o.scheme=o.secure?"wss":"ws",o.secure=void 0),o.resourceName){var m=o.resourceName.split("?"),v=p(m,2),S=v[0],R=v[1];o.path=S&&S!=="/"?S:void 0,o.query=R,o.resourceName=void 0}return o.fragment=void 0,o}},Ts={scheme:"wss",domainHost:Cr.domainHost,parse:Cr.parse,serialize:Cr.serialize},Xu={},Zu=!0,Ns="[A-Za-z0-9\\-\\.\\_\\~"+(Zu?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Ge="[0-9A-Fa-f]",ed=r(r("%[EFef]"+Ge+"%"+Ge+Ge+"%"+Ge+Ge)+"|"+r("%[89A-Fa-f]"+Ge+"%"+Ge+Ge)+"|"+r("%"+Ge+Ge)),td="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",rd="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",nd=e(rd,'[\\"\\\\]'),id="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ad=new RegExp(Ns,"g"),Jt=new RegExp(ed,"g"),sd=new RegExp(e("[^]",td,"[\\.]",'[\\"]',nd),"g"),Ds=new RegExp(e("[^]",Ns,id),"g"),od=Ds;function gi(l){var o=Ht(l);return o.match(ad)?o:l}var Rs={scheme:"mailto",parse:function(o,d){var m=o,v=m.to=m.path?m.path.split(","):[];if(m.path=void 0,m.query){for(var S=!1,R={},z=m.query.split("&"),Y=0,ce=z.length;Y<ce;++Y){var U=z[Y].split("=");switch(U[0]){case"to":for(var ne=U[1].split(","),le=0,re=ne.length;le<re;++le)v.push(ne[le]);break;case"subject":m.subject=it(U[1],d);break;case"body":m.body=it(U[1],d);break;default:S=!0,R[it(U[0],d)]=it(U[1],d);break}}S&&(m.headers=R)}m.query=void 0;for(var H=0,ie=v.length;H<ie;++H){var Q=v[H].split("@");if(Q[0]=it(Q[0]),d.unicodeSupport)Q[1]=it(Q[1],d).toLowerCase();else try{Q[1]=Kt.toASCII(it(Q[1],d).toLowerCase())}catch(Ot){m.error=m.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ot}v[H]=Q.join("@")}return m},serialize:function(o,d){var m=o,v=a(o.to);if(v){for(var S=0,R=v.length;S<R;++S){var z=String(v[S]),Y=z.lastIndexOf("@"),ce=z.slice(0,Y).replace(Jt,gi).replace(Jt,i).replace(sd,Ke),U=z.slice(Y+1);try{U=d.iri?Kt.toUnicode(U):Kt.toASCII(it(U,d).toLowerCase())}catch(H){m.error=m.error||"Email address's domain name can not be converted to "+(d.iri?"Unicode":"ASCII")+" via punycode: "+H}v[S]=ce+"@"+U}m.path=v.join(",")}var ne=o.headers=o.headers||{};o.subject&&(ne.subject=o.subject),o.body&&(ne.body=o.body);var le=[];for(var re in ne)ne[re]!==Xu[re]&&le.push(re.replace(Jt,gi).replace(Jt,i).replace(Ds,Ke)+"="+ne[re].replace(Jt,gi).replace(Jt,i).replace(od,Ke));return le.length&&(m.query=le.join("&")),m}},cd=/^([^\:]+)\:(.*)/,Ms={scheme:"urn",parse:function(o,d){var m=o.path&&o.path.match(cd),v=o;if(m){var S=d.scheme||v.scheme||"urn",R=m[1].toLowerCase(),z=m[2],Y=S+":"+(d.nid||R),ce=Ie[Y];v.nid=R,v.nss=z,v.path=void 0,ce&&(v=ce.parse(v,d))}else v.error=v.error||"URN can not be parsed.";return v},serialize:function(o,d){var m=d.scheme||o.scheme||"urn",v=o.nid,S=m+":"+(d.nid||v),R=Ie[S];R&&(o=R.serialize(o,d));var z=o,Y=o.nss;return z.path=(v||d.nid)+":"+Y,z}},ld=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,js={scheme:"urn:uuid",parse:function(o,d){var m=o;return m.uuid=m.nss,m.nss=void 0,!d.tolerant&&(!m.uuid||!m.uuid.match(ld))&&(m.error=m.error||"UUID is not valid."),m},serialize:function(o,d){var m=o;return m.nss=(o.uuid||"").toLowerCase(),m}};Ie[Sr.scheme]=Sr,Ie[Os.scheme]=Os,Ie[Cr.scheme]=Cr,Ie[Ts.scheme]=Ts,Ie[Rs.scheme]=Rs,Ie[Ms.scheme]=Ms,Ie[js.scheme]=js,t.SCHEMES=Ie,t.pctEncChar=Ke,t.pctDecChars=Ht,t.parse=nt,t.removeDotSegments=Gt,t.serialize=He,t.resolveComponents=Ps,t.resolve=Bu,t.normalize=Yu,t.equal=Wu,t.escapeComponent=Qu,t.unescapeComponent=it,Object.defineProperty(t,"__esModule",{value:!0})})});var Qc=$(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});var Wc=Yc();Wc.code='require("ajv/dist/runtime/uri").default';ua.default=Wc});var al=$(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.CodeGen=pe.Name=pe.nil=pe.stringify=pe.str=pe._=pe.KeywordCxt=void 0;var qp=Hr();Object.defineProperty(pe,"KeywordCxt",{enumerable:!0,get:function(){return qp.KeywordCxt}});var yr=D();Object.defineProperty(pe,"_",{enumerable:!0,get:function(){return yr._}});Object.defineProperty(pe,"str",{enumerable:!0,get:function(){return yr.str}});Object.defineProperty(pe,"stringify",{enumerable:!0,get:function(){return yr.stringify}});Object.defineProperty(pe,"nil",{enumerable:!0,get:function(){return yr.nil}});Object.defineProperty(pe,"Name",{enumerable:!0,get:function(){return yr.Name}});Object.defineProperty(pe,"CodeGen",{enumerable:!0,get:function(){return yr.CodeGen}});var xp=Jn(),rl=Bn(),Vp=Ki(),Jr=Gr(),Fp=D(),Br=Lr(),Qn=Ur(),fa=V(),Xc=Jc(),Up=Qc(),nl=(t,e)=>new RegExp(t,e);nl.code="new RegExp";var Lp=["removeAdditional","useDefaults","coerceTypes"],zp=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Kp={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Hp={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Zc=200;function Gp(t){var e,r,n,i,a,s,c,u,f,p,h,w,_,y,g,E,b,x,j,W,I,Oe,dt,br,Ct;let he=t.strict,Pt=(e=t.code)===null||e===void 0?void 0:e.optimize,ze=Pt===!0||Pt===void 0?1:Pt||0,un=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:nl,dn=(i=t.uriResolver)!==null&&i!==void 0?i:Up.default;return{strictSchema:(s=(a=t.strictSchema)!==null&&a!==void 0?a:he)!==null&&s!==void 0?s:!0,strictNumbers:(u=(c=t.strictNumbers)!==null&&c!==void 0?c:he)!==null&&u!==void 0?u:!0,strictTypes:(p=(f=t.strictTypes)!==null&&f!==void 0?f:he)!==null&&p!==void 0?p:"log",strictTuples:(w=(h=t.strictTuples)!==null&&h!==void 0?h:he)!==null&&w!==void 0?w:"log",strictRequired:(y=(_=t.strictRequired)!==null&&_!==void 0?_:he)!==null&&y!==void 0?y:!1,code:t.code?ae(G({},t.code),{optimize:ze,regExp:un}):{optimize:ze,regExp:un},loopRequired:(g=t.loopRequired)!==null&&g!==void 0?g:Zc,loopEnum:(E=t.loopEnum)!==null&&E!==void 0?E:Zc,meta:(b=t.meta)!==null&&b!==void 0?b:!0,messages:(x=t.messages)!==null&&x!==void 0?x:!0,inlineRefs:(j=t.inlineRefs)!==null&&j!==void 0?j:!0,schemaId:(W=t.schemaId)!==null&&W!==void 0?W:"$id",addUsedSchema:(I=t.addUsedSchema)!==null&&I!==void 0?I:!0,validateSchema:(Oe=t.validateSchema)!==null&&Oe!==void 0?Oe:!0,validateFormats:(dt=t.validateFormats)!==null&&dt!==void 0?dt:!0,unicodeRegExp:(br=t.unicodeRegExp)!==null&&br!==void 0?br:!0,int32range:(Ct=t.int32range)!==null&&Ct!==void 0?Ct:!0,uriResolver:dn}}var Yr=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=G(G({},e),Gp(e));let{es5:r,lines:n}=this.opts.code;this.scope=new Fp.ValueScope({scope:{},prefixes:zp,es5:r,lines:n}),this.logger=Xp(e.logger);let i=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Vp.getRules)(),el.call(this,Kp,e,"NOT SUPPORTED"),el.call(this,Hp,e,"DEPRECATED","warn"),this._metaOpts=Wp.call(this),e.formats&&Bp.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Yp.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Jp.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,i=Xc;n==="id"&&(i=G({},Xc),i.id=i.$id,delete i.$id),r&&e&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,e,r);function i(p,h){return er(this,null,function*(){yield a.call(this,p.$schema);let w=this._addSchema(p,h);return w.validate||s.call(this,w)})}function a(p){return er(this,null,function*(){p&&!this.getSchema(p)&&(yield i.call(this,{$ref:p},!0))})}function s(p){return er(this,null,function*(){try{return this._compileSchemaEnv(p)}catch(h){if(!(h instanceof rl.default))throw h;return c.call(this,h),yield u.call(this,h.missingSchema),s.call(this,p)}})}function c({missingSchema:p,missingRef:h}){if(this.refs[p])throw new Error(`AnySchema ${p} is loaded but ${h} cannot be resolved`)}function u(p){return er(this,null,function*(){let h=yield f.call(this,p);this.refs[p]||(yield a.call(this,h.$schema)),this.refs[p]||this.addSchema(h,p,r)})}function f(p){return er(this,null,function*(){let h=this._loading[p];if(h)return h;try{return yield this._loading[p]=n(p)}finally{delete this._loading[p]}})}}addSchema(e,r,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(let s of e)this.addSchema(s,void 0,n,i);return this}let a;if(typeof e=="object"){let{schemaId:s}=this.opts;if(a=e[s],a!==void 0&&typeof a!="string")throw new Error(`schema ${s} must be string`)}return r=(0,Br.normalizeId)(r||a),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,i,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,e);if(!i&&r){let a="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(a);else throw new Error(a)}return i}getSchema(e){let r;for(;typeof(r=tl.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,i=new Jr.SchemaEnv({schema:{},schemaId:n});if(r=Jr.resolveSchema.call(this,i,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=tl.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Br.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(em.call(this,n,r),!r)return(0,fa.eachItem)(n,a=>da.call(this,a)),this;rm.call(this,r);let i=ae(G({},r),{type:(0,Qn.getJSONTypes)(r.type),schemaType:(0,Qn.getJSONTypes)(r.schemaType)});return(0,fa.eachItem)(n,i.type.length===0?a=>da.call(this,a,i):a=>i.type.forEach(s=>da.call(this,a,i,s))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let i=n.rules.findIndex(a=>a.keyword===e);i>=0&&n.rules.splice(i,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,a)=>i+r+a)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let i of r){let a=i.split("/").slice(1),s=e;for(let c of a)s=s[c];for(let c in n){let u=n[c];if(typeof u!="object")continue;let{$data:f}=u.definition,p=s[c];f&&p&&(s[c]=il(p))}}return e}_removeAllSchemas(e,r){for(let n in e){let i=e[n];(!r||r.test(n))&&(typeof i=="string"?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,r,n,i=this.opts.validateSchema,a=this.opts.addUsedSchema){let s,{schemaId:c}=this.opts;if(typeof e=="object")s=e[c];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Br.normalizeId)(s||n);let f=Br.getSchemaRefs.call(this,e,n);return u=new Jr.SchemaEnv({schema:e,schemaId:c,meta:r,baseId:n,localRefs:f}),this._cache.set(u.schema,u),a&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),i&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Jr.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Jr.compileSchema.call(this,e)}finally{this.opts=r}}};pe.default=Yr;Yr.ValidationError=xp.default;Yr.MissingRefError=rl.default;function el(t,e,r,n="error"){for(let i in t){let a=i;a in e&&this.logger[n](`${r}: option ${i}. ${t[a]}`)}}function tl(t){return t=(0,Br.normalizeId)(t),this.schemas[t]||this.refs[t]}function Jp(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Bp(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Yp(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Wp(){let t=G({},this.opts);for(let e of Lp)delete t[e];return t}var Qp={log(){},warn(){},error(){}};function Xp(t){if(t===!1)return Qp;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Zp=/^[a-z_$][a-z0-9_$:-]*$/i;function em(t,e){let{RULES:r}=this;if((0,fa.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Zp.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function da(t,e,r){var n;let i=e?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:a}=this,s=i?a.post:a.rules.find(({type:u})=>u===r);if(s||(s={type:r,rules:[]},a.rules.push(s)),a.keywords[t]=!0,!e)return;let c={keyword:t,definition:ae(G({},e),{type:(0,Qn.getJSONTypes)(e.type),schemaType:(0,Qn.getJSONTypes)(e.schemaType)})};e.before?tm.call(this,s,c,e.before):s.rules.push(c),a.all[t]=c,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function tm(t,e,r){let n=t.rules.findIndex(i=>i.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function rm(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=il(e)),t.validateSchema=this.compile(e,!0))}var nm={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function il(t){return{anyOf:[t,nm]}}});var sl=$(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});var im={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};pa.default=im});var ei=$(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.callRef=Ft.getValidate=void 0;var am=Bn(),ol=ke(),be=D(),_r=je(),cl=Gr(),Xn=V(),sm={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:a,validateName:s,opts:c,self:u}=n,{root:f}=a;if((r==="#"||r==="#/")&&i===f.baseId)return h();let p=cl.resolveRef.call(u,f,i,r);if(p===void 0)throw new am.default(n.opts.uriResolver,i,r);if(p instanceof cl.SchemaEnv)return w(p);return _(p);function h(){if(a===f)return Zn(t,s,a,a.$async);let y=e.scopeValue("root",{ref:f});return Zn(t,(0,be._)`${y}.validate`,f,f.$async)}function w(y){let g=ll(t,y);Zn(t,g,y,y.$async)}function _(y){let g=e.scopeValue("schema",c.code.source===!0?{ref:y,code:(0,be.stringify)(y)}:{ref:y}),E=e.name("valid"),b=t.subschema({schema:y,dataTypes:[],schemaPath:be.nil,topSchemaRef:g,errSchemaPath:r},E);t.mergeEvaluated(b),t.ok(E)}}};function ll(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,be._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Ft.getValidate=ll;function Zn(t,e,r,n){let{gen:i,it:a}=t,{allErrors:s,schemaEnv:c,opts:u}=a,f=u.passContext?_r.default.this:be.nil;n?p():h();function p(){if(!c.$async)throw new Error("async schema referenced by sync schema");let y=i.let("valid");i.try(()=>{i.code((0,be._)`await ${(0,ol.callValidateCode)(t,e,f)}`),_(e),s||i.assign(y,!0)},g=>{i.if((0,be._)`!(${g} instanceof ${a.ValidationError})`,()=>i.throw(g)),w(g),s||i.assign(y,!1)}),t.ok(y)}function h(){t.result((0,ol.callValidateCode)(t,e,f),()=>_(e),()=>w(e))}function w(y){let g=(0,be._)`${y}.errors`;i.assign(_r.default.vErrors,(0,be._)`${_r.default.vErrors} === null ? ${g} : ${_r.default.vErrors}.concat(${g})`),i.assign(_r.default.errors,(0,be._)`${_r.default.vErrors}.length`)}function _(y){var g;if(!a.opts.unevaluated)return;let E=(g=r?.validate)===null||g===void 0?void 0:g.evaluated;if(a.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(a.props=Xn.mergeEvaluated.props(i,E.props,a.props));else{let b=i.var("props",(0,be._)`${y}.evaluated.props`);a.props=Xn.mergeEvaluated.props(i,b,a.props,be.Name)}if(a.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(a.items=Xn.mergeEvaluated.items(i,E.items,a.items));else{let b=i.var("items",(0,be._)`${y}.evaluated.items`);a.items=Xn.mergeEvaluated.items(i,b,a.items,be.Name)}}}Ft.callRef=Zn;Ft.default=sm});var ul=$(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var om=sl(),cm=ei(),lm=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",om.default,cm.default];ma.default=lm});var dl=$(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var ti=D(),bt=ti.operators,ri={maximum:{okStr:"<=",ok:bt.LTE,fail:bt.GT},minimum:{okStr:">=",ok:bt.GTE,fail:bt.LT},exclusiveMaximum:{okStr:"<",ok:bt.LT,fail:bt.GTE},exclusiveMinimum:{okStr:">",ok:bt.GT,fail:bt.LTE}},um={message:({keyword:t,schemaCode:e})=>(0,ti.str)`must be ${ri[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,ti._)`{comparison: ${ri[t].okStr}, limit: ${e}}`},dm={keyword:Object.keys(ri),type:"number",schemaType:"number",$data:!0,error:um,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,ti._)`${r} ${ri[e].fail} ${n} || isNaN(${r})`)}};ha.default=dm});var fl=$(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var Wr=D(),fm={message:({schemaCode:t})=>(0,Wr.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Wr._)`{multipleOf: ${t}}`},pm={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:fm,code(t){let{gen:e,data:r,schemaCode:n,it:i}=t,a=i.opts.multipleOfPrecision,s=e.let("res"),c=a?(0,Wr._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${a}`:(0,Wr._)`${s} !== parseInt(${s})`;t.fail$data((0,Wr._)`(${n} === 0 || (${s} = ${r}/${n}, ${c}))`)}};va.default=pm});var ml=$(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});function pl(t){let e=t.length,r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}ga.default=pl;pl.code='require("ajv/dist/runtime/ucs2length").default'});var hl=$(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var Ut=D(),mm=V(),hm=ml(),vm={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Ut.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Ut._)`{limit: ${t}}`},gm={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:vm,code(t){let{keyword:e,data:r,schemaCode:n,it:i}=t,a=e==="maxLength"?Ut.operators.GT:Ut.operators.LT,s=i.opts.unicode===!1?(0,Ut._)`${r}.length`:(0,Ut._)`${(0,mm.useFunc)(t.gen,hm.default)}(${r})`;t.fail$data((0,Ut._)`${s} ${a} ${n}`)}};ya.default=gm});var vl=$(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var ym=ke(),ni=D(),_m={message:({schemaCode:t})=>(0,ni.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,ni._)`{pattern: ${t}}`},$m={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:_m,code(t){let{data:e,$data:r,schema:n,schemaCode:i,it:a}=t,s=a.opts.unicodeRegExp?"u":"",c=r?(0,ni._)`(new RegExp(${i}, ${s}))`:(0,ym.usePattern)(t,n);t.fail$data((0,ni._)`!${c}.test(${e})`)}};_a.default=$m});var gl=$($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var Qr=D(),wm={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Qr.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Qr._)`{limit: ${t}}`},Em={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:wm,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?Qr.operators.GT:Qr.operators.LT;t.fail$data((0,Qr._)`Object.keys(${r}).length ${i} ${n}`)}};$a.default=Em});var yl=$(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});var Xr=ke(),Zr=D(),bm=V(),Sm={message:({params:{missingProperty:t}})=>(0,Zr.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Zr._)`{missingProperty: ${t}}`},Cm={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Sm,code(t){let{gen:e,schema:r,schemaCode:n,data:i,$data:a,it:s}=t,{opts:c}=s;if(!a&&r.length===0)return;let u=r.length>=c.loopRequired;if(s.allErrors?f():p(),c.strictRequired){let _=t.parentSchema.properties,{definedProperties:y}=t.it;for(let g of r)if(_?.[g]===void 0&&!y.has(g)){let E=s.schemaEnv.baseId+s.errSchemaPath,b=`required property "${g}" is not defined at "${E}" (strictRequired)`;(0,bm.checkStrictMode)(s,b,s.opts.strictRequired)}}function f(){if(u||a)t.block$data(Zr.nil,h);else for(let _ of r)(0,Xr.checkReportMissingProp)(t,_)}function p(){let _=e.let("missing");if(u||a){let y=e.let("valid",!0);t.block$data(y,()=>w(_,y)),t.ok(y)}else e.if((0,Xr.checkMissingProp)(t,r,_)),(0,Xr.reportMissingProp)(t,_),e.else()}function h(){e.forOf("prop",n,_=>{t.setParams({missingProperty:_}),e.if((0,Xr.noPropertyInData)(e,i,_,c.ownProperties),()=>t.error())})}function w(_,y){t.setParams({missingProperty:_}),e.forOf(_,n,()=>{e.assign(y,(0,Xr.propertyInData)(e,i,_,c.ownProperties)),e.if((0,Zr.not)(y),()=>{t.error(),e.break()})},Zr.nil)}}};wa.default=Cm});var _l=$(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var en=D(),Pm={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,en.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,en._)`{limit: ${t}}`},Om={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Pm,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?en.operators.GT:en.operators.LT;t.fail$data((0,en._)`${r}.length ${i} ${n}`)}};Ea.default=Om});var ii=$(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});var $l=Xi();$l.code='require("ajv/dist/runtime/equal").default';ba.default=$l});var wl=$(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var Sa=Ur(),me=D(),Im=V(),Tm=ii(),Nm={message:({params:{i:t,j:e}})=>(0,me.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,me._)`{i: ${t}, j: ${e}}`},Dm={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Nm,code(t){let{gen:e,data:r,$data:n,schema:i,parentSchema:a,schemaCode:s,it:c}=t;if(!n&&!i)return;let u=e.let("valid"),f=a.items?(0,Sa.getSchemaTypes)(a.items):[];t.block$data(u,p,(0,me._)`${s} === false`),t.ok(u);function p(){let y=e.let("i",(0,me._)`${r}.length`),g=e.let("j");t.setParams({i:y,j:g}),e.assign(u,!0),e.if((0,me._)`${y} > 1`,()=>(h()?w:_)(y,g))}function h(){return f.length>0&&!f.some(y=>y==="object"||y==="array")}function w(y,g){let E=e.name("item"),b=(0,Sa.checkDataTypes)(f,E,c.opts.strictNumbers,Sa.DataType.Wrong),x=e.const("indices",(0,me._)`{}`);e.for((0,me._)`;${y}--;`,()=>{e.let(E,(0,me._)`${r}[${y}]`),e.if(b,(0,me._)`continue`),f.length>1&&e.if((0,me._)`typeof ${E} == "string"`,(0,me._)`${E} += "_"`),e.if((0,me._)`typeof ${x}[${E}] == "number"`,()=>{e.assign(g,(0,me._)`${x}[${E}]`),t.error(),e.assign(u,!1).break()}).code((0,me._)`${x}[${E}] = ${y}`)})}function _(y,g){let E=(0,Im.useFunc)(e,Tm.default),b=e.name("outer");e.label(b).for((0,me._)`;${y}--;`,()=>e.for((0,me._)`${g} = ${y}; ${g}--;`,()=>e.if((0,me._)`${E}(${r}[${y}], ${r}[${g}])`,()=>{t.error(),e.assign(u,!1).break(b)})))}}};Ca.default=Dm});var El=$(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});var Pa=D(),Rm=V(),Mm=ii(),jm={message:"must be equal to constant",params:({schemaCode:t})=>(0,Pa._)`{allowedValue: ${t}}`},km={keyword:"const",$data:!0,error:jm,code(t){let{gen:e,data:r,$data:n,schemaCode:i,schema:a}=t;n||a&&typeof a=="object"?t.fail$data((0,Pa._)`!${(0,Rm.useFunc)(e,Mm.default)}(${r}, ${i})`):t.fail((0,Pa._)`${a} !== ${r}`)}};Oa.default=km});var bl=$(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});var tn=D(),Am=V(),qm=ii(),xm={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,tn._)`{allowedValues: ${t}}`},Vm={keyword:"enum",schemaType:"array",$data:!0,error:xm,code(t){let{gen:e,data:r,$data:n,schema:i,schemaCode:a,it:s}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let c=i.length>=s.opts.loopEnum,u,f=()=>u??(u=(0,Am.useFunc)(e,qm.default)),p;if(c||n)p=e.let("valid"),t.block$data(p,h);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let _=e.const("vSchema",a);p=(0,tn.or)(...i.map((y,g)=>w(_,g)))}t.pass(p);function h(){e.assign(p,!1),e.forOf("v",a,_=>e.if((0,tn._)`${f()}(${r}, ${_})`,()=>e.assign(p,!0).break()))}function w(_,y){let g=i[y];return typeof g=="object"&&g!==null?(0,tn._)`${f()}(${r}, ${_}[${y}])`:(0,tn._)`${r} === ${g}`}}};Ia.default=Vm});var Sl=$(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var Fm=dl(),Um=fl(),Lm=hl(),zm=vl(),Km=gl(),Hm=yl(),Gm=_l(),Jm=wl(),Bm=El(),Ym=bl(),Wm=[Fm.default,Um.default,Lm.default,zm.default,Km.default,Hm.default,Gm.default,Jm.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Bm.default,Ym.default];Ta.default=Wm});var Da=$(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.validateAdditionalItems=void 0;var Lt=D(),Na=V(),Qm={message:({params:{len:t}})=>(0,Lt.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Lt._)`{limit: ${t}}`},Xm={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Qm,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,Na.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Cl(t,n)}};function Cl(t,e){let{gen:r,schema:n,data:i,keyword:a,it:s}=t;s.items=!0;let c=r.const("len",(0,Lt._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Lt._)`${c} <= ${e.length}`);else if(typeof n=="object"&&!(0,Na.alwaysValidSchema)(s,n)){let f=r.var("valid",(0,Lt._)`${c} <= ${e.length}`);r.if((0,Lt.not)(f),()=>u(f)),t.ok(f)}function u(f){r.forRange("i",e.length,c,p=>{t.subschema({keyword:a,dataProp:p,dataPropType:Na.Type.Num},f),s.allErrors||r.if((0,Lt.not)(f),()=>r.break())})}}rn.validateAdditionalItems=Cl;rn.default=Xm});var Ra=$(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.validateTuple=void 0;var Pl=D(),ai=V(),Zm=ke(),eh={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Ol(t,"additionalItems",e);r.items=!0,!(0,ai.alwaysValidSchema)(r,e)&&t.ok((0,Zm.validateArray)(t))}};function Ol(t,e,r=t.schema){let{gen:n,parentSchema:i,data:a,keyword:s,it:c}=t;p(i),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=ai.mergeEvaluated.items(n,r.length,c.items));let u=n.name("valid"),f=n.const("len",(0,Pl._)`${a}.length`);r.forEach((h,w)=>{(0,ai.alwaysValidSchema)(c,h)||(n.if((0,Pl._)`${f} > ${w}`,()=>t.subschema({keyword:s,schemaProp:w,dataProp:w},u)),t.ok(u))});function p(h){let{opts:w,errSchemaPath:_}=c,y=r.length,g=y===h.minItems&&(y===h.maxItems||h[e]===!1);if(w.strictTuples&&!g){let E=`"${s}" is ${y}-tuple, but minItems or maxItems/${e} are not specified or different at path "${_}"`;(0,ai.checkStrictMode)(c,E,w.strictTuples)}}}nn.validateTuple=Ol;nn.default=eh});var Il=$(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var th=Ra(),rh={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,th.validateTuple)(t,"items")};Ma.default=rh});var Nl=$(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});var Tl=D(),nh=V(),ih=ke(),ah=Da(),sh={message:({params:{len:t}})=>(0,Tl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Tl._)`{limit: ${t}}`},oh={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:sh,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,nh.alwaysValidSchema)(n,e)&&(i?(0,ah.validateAdditionalItems)(t,i):t.ok((0,ih.validateArray)(t)))}};ja.default=oh});var Dl=$(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});var qe=D(),si=V(),ch={message:({params:{min:t,max:e}})=>e===void 0?(0,qe.str)`must contain at least ${t} valid item(s)`:(0,qe.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,qe._)`{minContains: ${t}}`:(0,qe._)`{minContains: ${t}, maxContains: ${e}}`},lh={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ch,code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:a}=t,s,c,{minContains:u,maxContains:f}=n;a.opts.next?(s=u===void 0?1:u,c=f):s=1;let p=e.const("len",(0,qe._)`${i}.length`);if(t.setParams({min:s,max:c}),c===void 0&&s===0){(0,si.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&s>c){(0,si.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,si.alwaysValidSchema)(a,r)){let g=(0,qe._)`${p} >= ${s}`;c!==void 0&&(g=(0,qe._)`${g} && ${p} <= ${c}`),t.pass(g);return}a.items=!0;let h=e.name("valid");c===void 0&&s===1?_(h,()=>e.if(h,()=>e.break())):s===0?(e.let(h,!0),c!==void 0&&e.if((0,qe._)`${i}.length > 0`,w)):(e.let(h,!1),w()),t.result(h,()=>t.reset());function w(){let g=e.name("_valid"),E=e.let("count",0);_(g,()=>e.if(g,()=>y(E)))}function _(g,E){e.forRange("i",0,p,b=>{t.subschema({keyword:"contains",dataProp:b,dataPropType:si.Type.Num,compositeRule:!0},g),E()})}function y(g){e.code((0,qe._)`${g}++`),c===void 0?e.if((0,qe._)`${g} >= ${s}`,()=>e.assign(h,!0).break()):(e.if((0,qe._)`${g} > ${c}`,()=>e.assign(h,!1).break()),s===1?e.assign(h,!0):e.if((0,qe._)`${g} >= ${s}`,()=>e.assign(h,!0)))}}};ka.default=lh});var oi=$(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.validateSchemaDeps=rt.validatePropertyDeps=rt.error=void 0;var Aa=D(),uh=V(),an=ke();rt.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,Aa.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,Aa._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var dh={keyword:"dependencies",type:"object",schemaType:"object",error:rt.error,code(t){let[e,r]=fh(t);Rl(t,e),Ml(t,r)}};function fh({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let i=Array.isArray(t[n])?e:r;i[n]=t[n]}return[e,r]}function Rl(t,e=t.schema){let{gen:r,data:n,it:i}=t;if(Object.keys(e).length===0)return;let a=r.let("missing");for(let s in e){let c=e[s];if(c.length===0)continue;let u=(0,an.propertyInData)(r,n,s,i.opts.ownProperties);t.setParams({property:s,depsCount:c.length,deps:c.join(", ")}),i.allErrors?r.if(u,()=>{for(let f of c)(0,an.checkReportMissingProp)(t,f)}):(r.if((0,Aa._)`${u} && (${(0,an.checkMissingProp)(t,c,a)})`),(0,an.reportMissingProp)(t,a),r.else())}}rt.validatePropertyDeps=Rl;function Ml(t,e=t.schema){let{gen:r,data:n,keyword:i,it:a}=t,s=r.name("valid");for(let c in e)(0,uh.alwaysValidSchema)(a,e[c])||(r.if((0,an.propertyInData)(r,n,c,a.opts.ownProperties),()=>{let u=t.subschema({keyword:i,schemaProp:c},s);t.mergeValidEvaluated(u,s)},()=>r.var(s,!0)),t.ok(s))}rt.validateSchemaDeps=Ml;rt.default=dh});var kl=$(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var jl=D(),ph=V(),mh={message:"property name must be valid",params:({params:t})=>(0,jl._)`{propertyName: ${t.propertyName}}`},hh={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:mh,code(t){let{gen:e,schema:r,data:n,it:i}=t;if((0,ph.alwaysValidSchema)(i,r))return;let a=e.name("valid");e.forIn("key",n,s=>{t.setParams({propertyName:s}),t.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},a),e.if((0,jl.not)(a),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(a)}};qa.default=hh});var Va=$(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});var ci=ke(),Le=D(),vh=je(),li=V(),gh={message:"must NOT have additional properties",params:({params:t})=>(0,Le._)`{additionalProperty: ${t.additionalProperty}}`},yh={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:gh,code(t){let{gen:e,schema:r,parentSchema:n,data:i,errsCount:a,it:s}=t;if(!a)throw new Error("ajv implementation error");let{allErrors:c,opts:u}=s;if(s.props=!0,u.removeAdditional!=="all"&&(0,li.alwaysValidSchema)(s,r))return;let f=(0,ci.allSchemaProperties)(n.properties),p=(0,ci.allSchemaProperties)(n.patternProperties);h(),t.ok((0,Le._)`${a} === ${vh.default.errors}`);function h(){e.forIn("key",i,E=>{!f.length&&!p.length?y(E):e.if(w(E),()=>y(E))})}function w(E){let b;if(f.length>8){let x=(0,li.schemaRefOrVal)(s,n.properties,"properties");b=(0,ci.isOwnProperty)(e,x,E)}else f.length?b=(0,Le.or)(...f.map(x=>(0,Le._)`${E} === ${x}`)):b=Le.nil;return p.length&&(b=(0,Le.or)(b,...p.map(x=>(0,Le._)`${(0,ci.usePattern)(t,x)}.test(${E})`))),(0,Le.not)(b)}function _(E){e.code((0,Le._)`delete ${i}[${E}]`)}function y(E){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){_(E);return}if(r===!1){t.setParams({additionalProperty:E}),t.error(),c||e.break();return}if(typeof r=="object"&&!(0,li.alwaysValidSchema)(s,r)){let b=e.name("valid");u.removeAdditional==="failing"?(g(E,b,!1),e.if((0,Le.not)(b),()=>{t.reset(),_(E)})):(g(E,b),c||e.if((0,Le.not)(b),()=>e.break()))}}function g(E,b,x){let j={keyword:"additionalProperties",dataProp:E,dataPropType:li.Type.Str};x===!1&&Object.assign(j,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(j,b)}}};xa.default=yh});var xl=$(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});var _h=Hr(),Al=ke(),Fa=V(),ql=Va(),$h={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:a}=t;a.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ql.default.code(new _h.KeywordCxt(a,ql.default,"additionalProperties"));let s=(0,Al.allSchemaProperties)(r);for(let h of s)a.definedProperties.add(h);a.opts.unevaluated&&s.length&&a.props!==!0&&(a.props=Fa.mergeEvaluated.props(e,(0,Fa.toHash)(s),a.props));let c=s.filter(h=>!(0,Fa.alwaysValidSchema)(a,r[h]));if(c.length===0)return;let u=e.name("valid");for(let h of c)f(h)?p(h):(e.if((0,Al.propertyInData)(e,i,h,a.opts.ownProperties)),p(h),a.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(h),t.ok(u);function f(h){return a.opts.useDefaults&&!a.compositeRule&&r[h].default!==void 0}function p(h){t.subschema({keyword:"properties",schemaProp:h,dataProp:h},u)}}};Ua.default=$h});var Ll=$(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});var Vl=ke(),ui=D(),Fl=V(),Ul=V(),wh={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:i,it:a}=t,{opts:s}=a,c=(0,Vl.allSchemaProperties)(r),u=c.filter(g=>(0,Fl.alwaysValidSchema)(a,r[g]));if(c.length===0||u.length===c.length&&(!a.opts.unevaluated||a.props===!0))return;let f=s.strictSchema&&!s.allowMatchingProperties&&i.properties,p=e.name("valid");a.props!==!0&&!(a.props instanceof ui.Name)&&(a.props=(0,Ul.evaluatedPropsToName)(e,a.props));let{props:h}=a;w();function w(){for(let g of c)f&&_(g),a.allErrors?y(g):(e.var(p,!0),y(g),e.if(p))}function _(g){for(let E in f)new RegExp(g).test(E)&&(0,Fl.checkStrictMode)(a,`property ${E} matches pattern ${g} (use allowMatchingProperties)`)}function y(g){e.forIn("key",n,E=>{e.if((0,ui._)`${(0,Vl.usePattern)(t,g)}.test(${E})`,()=>{let b=u.includes(g);b||t.subschema({keyword:"patternProperties",schemaProp:g,dataProp:E,dataPropType:Ul.Type.Str},p),a.opts.unevaluated&&h!==!0?e.assign((0,ui._)`${h}[${E}]`,!0):!b&&!a.allErrors&&e.if((0,ui.not)(p),()=>e.break())})})}}};La.default=wh});var zl=$(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});var Eh=V(),bh={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Eh.alwaysValidSchema)(n,r)){t.fail();return}let i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};za.default=bh});var Kl=$(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});var Sh=ke(),Ch={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Sh.validateUnion,error:{message:"must match a schema in anyOf"}};Ka.default=Ch});var Hl=$(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var di=D(),Ph=V(),Oh={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,di._)`{passingSchemas: ${t.passing}}`},Ih={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Oh,code(t){let{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let a=r,s=e.let("valid",!1),c=e.let("passing",null),u=e.name("_valid");t.setParams({passing:c}),e.block(f),t.result(s,()=>t.reset(),()=>t.error(!0));function f(){a.forEach((p,h)=>{let w;(0,Ph.alwaysValidSchema)(i,p)?e.var(u,!0):w=t.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},u),h>0&&e.if((0,di._)`${u} && ${s}`).assign(s,!1).assign(c,(0,di._)`[${c}, ${h}]`).else(),e.if(u,()=>{e.assign(s,!0),e.assign(c,h),w&&t.mergeEvaluated(w,di.Name)})})}}};Ha.default=Ih});var Gl=$(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var Th=V(),Nh={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=e.name("valid");r.forEach((a,s)=>{if((0,Th.alwaysValidSchema)(n,a))return;let c=t.subschema({keyword:"allOf",schemaProp:s},i);t.ok(i),t.mergeEvaluated(c)})}};Ga.default=Nh});var Yl=$(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});var fi=D(),Bl=V(),Dh={message:({params:t})=>(0,fi.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,fi._)`{failingKeyword: ${t.ifClause}}`},Rh={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Dh,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Bl.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=Jl(n,"then"),a=Jl(n,"else");if(!i&&!a)return;let s=e.let("valid",!0),c=e.name("_valid");if(u(),t.reset(),i&&a){let p=e.let("ifClause");t.setParams({ifClause:p}),e.if(c,f("then",p),f("else",p))}else i?e.if(c,f("then")):e.if((0,fi.not)(c),f("else"));t.pass(s,()=>t.error(!0));function u(){let p=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);t.mergeEvaluated(p)}function f(p,h){return()=>{let w=t.subschema({keyword:p},c);e.assign(s,c),t.mergeValidEvaluated(w,s),h?e.assign(h,(0,fi._)`${p}`):t.setParams({ifClause:p})}}}};function Jl(t,e){let r=t.schema[e];return r!==void 0&&!(0,Bl.alwaysValidSchema)(t,r)}Ja.default=Rh});var Wl=$(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var Mh=V(),jh={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Mh.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Ba.default=jh});var Ql=$(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});var kh=Da(),Ah=Il(),qh=Ra(),xh=Nl(),Vh=Dl(),Fh=oi(),Uh=kl(),Lh=Va(),zh=xl(),Kh=Ll(),Hh=zl(),Gh=Kl(),Jh=Hl(),Bh=Gl(),Yh=Yl(),Wh=Wl();function Qh(t=!1){let e=[Hh.default,Gh.default,Jh.default,Bh.default,Yh.default,Wh.default,Uh.default,Lh.default,Fh.default,zh.default,Kh.default];return t?e.push(Ah.default,xh.default):e.push(kh.default,qh.default),e.push(Vh.default),e}Ya.default=Qh});var Xl=$(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});var oe=D(),Xh={message:({schemaCode:t})=>(0,oe.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,oe._)`{format: ${t}}`},Zh={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Xh,code(t,e){let{gen:r,data:n,$data:i,schema:a,schemaCode:s,it:c}=t,{opts:u,errSchemaPath:f,schemaEnv:p,self:h}=c;if(!u.validateFormats)return;i?w():_();function w(){let y=r.scopeValue("formats",{ref:h.formats,code:u.code.formats}),g=r.const("fDef",(0,oe._)`${y}[${s}]`),E=r.let("fType"),b=r.let("format");r.if((0,oe._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(E,(0,oe._)`${g}.type || "string"`).assign(b,(0,oe._)`${g}.validate`),()=>r.assign(E,(0,oe._)`"string"`).assign(b,g)),t.fail$data((0,oe.or)(x(),j()));function x(){return u.strictSchema===!1?oe.nil:(0,oe._)`${s} && !${b}`}function j(){let W=p.$async?(0,oe._)`(${g}.async ? await ${b}(${n}) : ${b}(${n}))`:(0,oe._)`${b}(${n})`,I=(0,oe._)`(typeof ${b} == "function" ? ${W} : ${b}.test(${n}))`;return(0,oe._)`${b} && ${b} !== true && ${E} === ${e} && !${I}`}}function _(){let y=h.formats[a];if(!y){x();return}if(y===!0)return;let[g,E,b]=j(y);g===e&&t.pass(W());function x(){if(u.strictSchema===!1){h.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${a}" ignored in schema at path "${f}"`}}function j(I){let Oe=I instanceof RegExp?(0,oe.regexpCode)(I):u.code.formats?(0,oe._)`${u.code.formats}${(0,oe.getProperty)(a)}`:void 0,dt=r.scopeValue("formats",{key:a,ref:I,code:Oe});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,oe._)`${dt}.validate`]:["string",I,dt]}function W(){if(typeof y=="object"&&!(y instanceof RegExp)&&y.async){if(!p.$async)throw new Error("async format in sync schema");return(0,oe._)`await ${b}(${n})`}return typeof E=="function"?(0,oe._)`${b}(${n})`:(0,oe._)`${b}.test(${n})`}}}};Wa.default=Zh});var Zl=$(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var ev=Xl(),tv=[ev.default];Qa.default=tv});var eu=$($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.contentVocabulary=$r.metadataVocabulary=void 0;$r.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];$r.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ru=$(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var rv=ul(),nv=Sl(),iv=Ql(),av=Zl(),tu=eu(),sv=[rv.default,nv.default,(0,iv.default)(),av.default,tu.metadataVocabulary,tu.contentVocabulary];Xa.default=sv});var es=$(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.dynamicAnchor=void 0;var Za=D(),ov=je(),nu=Gr(),cv=ei(),lv={keyword:"$dynamicAnchor",schemaType:"string",code:t=>iu(t,t.schema)};function iu(t,e){let{gen:r,it:n}=t;n.schemaEnv.root.dynamicAnchors[e]=!0;let i=(0,Za._)`${ov.default.dynamicAnchors}${(0,Za.getProperty)(e)}`,a=n.errSchemaPath==="#"?n.validateName:uv(t);r.if((0,Za._)`!${i}`,()=>r.assign(i,a))}sn.dynamicAnchor=iu;function uv(t){let{schemaEnv:e,schema:r,self:n}=t.it,{root:i,baseId:a,localRefs:s,meta:c}=e.root,{schemaId:u}=n.opts,f=new nu.SchemaEnv({schema:r,schemaId:u,root:i,baseId:a,localRefs:s,meta:c});return nu.compileSchema.call(n,f),(0,cv.getValidate)(t,f)}sn.default=lv});var ts=$(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.dynamicRef=void 0;var au=D(),dv=je(),su=ei(),fv={keyword:"$dynamicRef",schemaType:"string",code:t=>ou(t,t.schema)};function ou(t,e){let{gen:r,keyword:n,it:i}=t;if(e[0]!=="#")throw new Error(`"${n}" only supports hash fragment reference`);let a=e.slice(1);if(i.allErrors)s();else{let u=r.let("valid",!1);s(u),t.ok(u)}function s(u){if(i.schemaEnv.root.dynamicAnchors[a]){let f=r.let("_v",(0,au._)`${dv.default.dynamicAnchors}${(0,au.getProperty)(a)}`);r.if(f,c(f,u),c(i.validateName,u))}else c(i.validateName,u)()}function c(u,f){return f?()=>r.block(()=>{(0,su.callRef)(t,u),r.let(f,!0)}):()=>(0,su.callRef)(t,u)}}on.dynamicRef=ou;on.default=fv});var cu=$(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});var pv=es(),mv=V(),hv={keyword:"$recursiveAnchor",schemaType:"boolean",code(t){t.schema?(0,pv.dynamicAnchor)(t,""):(0,mv.checkStrictMode)(t.it,"$recursiveAnchor: false is ignored")}};rs.default=hv});var lu=$(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});var vv=ts(),gv={keyword:"$recursiveRef",schemaType:"string",code:t=>(0,vv.dynamicRef)(t,t.schema)};ns.default=gv});var uu=$(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});var yv=es(),_v=ts(),$v=cu(),wv=lu(),Ev=[yv.default,_v.default,$v.default,wv.default];is.default=Ev});var fu=$(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});var du=oi(),bv={keyword:"dependentRequired",type:"object",schemaType:"object",error:du.error,code:t=>(0,du.validatePropertyDeps)(t)};as.default=bv});var pu=$(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});var Sv=oi(),Cv={keyword:"dependentSchemas",type:"object",schemaType:"object",code:t=>(0,Sv.validateSchemaDeps)(t)};ss.default=Cv});var mu=$(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});var Pv=V(),Ov={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:t,parentSchema:e,it:r}){e.contains===void 0&&(0,Pv.checkStrictMode)(r,`"${t}" without "contains" is ignored`)}};os.default=Ov});var hu=$(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});var Iv=fu(),Tv=pu(),Nv=mu(),Dv=[Iv.default,Tv.default,Nv.default];cs.default=Dv});var gu=$(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});var St=D(),vu=V(),Rv=je(),Mv={message:"must NOT have unevaluated properties",params:({params:t})=>(0,St._)`{unevaluatedProperty: ${t.unevaluatedProperty}}`},jv={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:Mv,code(t){let{gen:e,schema:r,data:n,errsCount:i,it:a}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:s,props:c}=a;c instanceof St.Name?e.if((0,St._)`${c} !== true`,()=>e.forIn("key",n,h=>e.if(f(c,h),()=>u(h)))):c!==!0&&e.forIn("key",n,h=>c===void 0?u(h):e.if(p(c,h),()=>u(h))),a.props=!0,t.ok((0,St._)`${i} === ${Rv.default.errors}`);function u(h){if(r===!1){t.setParams({unevaluatedProperty:h}),t.error(),s||e.break();return}if(!(0,vu.alwaysValidSchema)(a,r)){let w=e.name("valid");t.subschema({keyword:"unevaluatedProperties",dataProp:h,dataPropType:vu.Type.Str},w),s||e.if((0,St.not)(w),()=>e.break())}}function f(h,w){return(0,St._)`!${h} || !${h}[${w}]`}function p(h,w){let _=[];for(let y in h)h[y]===!0&&_.push((0,St._)`${w} !== ${y}`);return(0,St.and)(..._)}}};ls.default=jv});var _u=$(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});var zt=D(),yu=V(),kv={message:({params:{len:t}})=>(0,zt.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,zt._)`{limit: ${t}}`},Av={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:kv,code(t){let{gen:e,schema:r,data:n,it:i}=t,a=i.items||0;if(a===!0)return;let s=e.const("len",(0,zt._)`${n}.length`);if(r===!1)t.setParams({len:a}),t.fail((0,zt._)`${s} > ${a}`);else if(typeof r=="object"&&!(0,yu.alwaysValidSchema)(i,r)){let u=e.var("valid",(0,zt._)`${s} <= ${a}`);e.if((0,zt.not)(u),()=>c(u,a)),t.ok(u)}i.items=!0;function c(u,f){e.forRange("i",f,s,p=>{t.subschema({keyword:"unevaluatedItems",dataProp:p,dataPropType:yu.Type.Num},u),i.allErrors||e.if((0,zt.not)(u),()=>e.break())})}}};us.default=Av});var $u=$(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});var qv=gu(),xv=_u(),Vv=[qv.default,xv.default];ds.default=Vv});var wu=$(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.DiscrError=void 0;var Fv;(function(t){t.Tag="tag",t.Mapping="mapping"})(Fv=cn.DiscrError||(cn.DiscrError={}))});var bu=$(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});var wr=D(),fs=wu(),Eu=Gr(),Uv=V(),Lv={message:({params:{discrError:t,tagName:e}})=>t===fs.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,wr._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},zv={keyword:"discriminator",type:"object",schemaType:"object",error:Lv,code(t){let{gen:e,data:r,schema:n,parentSchema:i,it:a}=t,{oneOf:s}=i;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");let c=n.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),f=e.const("tag",(0,wr._)`${r}${(0,wr.getProperty)(c)}`);e.if((0,wr._)`typeof ${f} == "string"`,()=>p(),()=>t.error(!1,{discrError:fs.DiscrError.Tag,tag:f,tagName:c})),t.ok(u);function p(){let _=w();e.if(!1);for(let y in _)e.elseIf((0,wr._)`${f} === ${y}`),e.assign(u,h(_[y]));e.else(),t.error(!1,{discrError:fs.DiscrError.Mapping,tag:f,tagName:c}),e.endIf()}function h(_){let y=e.name("valid"),g=t.subschema({keyword:"oneOf",schemaProp:_},y);return t.mergeEvaluated(g,wr.Name),y}function w(){var _;let y={},g=b(i),E=!0;for(let W=0;W<s.length;W++){let I=s[W];I?.$ref&&!(0,Uv.schemaHasRulesButRef)(I,a.self.RULES)&&(I=Eu.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,I?.$ref),I instanceof Eu.SchemaEnv&&(I=I.schema));let Oe=(_=I?.properties)===null||_===void 0?void 0:_[c];if(typeof Oe!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);E=E&&(g||b(I)),x(Oe,W)}if(!E)throw new Error(`discriminator: "${c}" must be required`);return y;function b({required:W}){return Array.isArray(W)&&W.includes(c)}function x(W,I){if(W.const)j(W.const,I);else if(W.enum)for(let Oe of W.enum)j(Oe,I);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function j(W,I){if(typeof W!="string"||W in y)throw new Error(`discriminator: "${c}" values must be unique strings`);y[W]=I}}}};ps.default=zv});var Su=$((z0,Kv)=>{Kv.exports={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/core":!0,"https://json-schema.org/draft/2019-09/vocab/applicator":!0,"https://json-schema.org/draft/2019-09/vocab/validation":!0,"https://json-schema.org/draft/2019-09/vocab/meta-data":!0,"https://json-schema.org/draft/2019-09/vocab/format":!1,"https://json-schema.org/draft/2019-09/vocab/content":!0},$recursiveAnchor:!0,title:"Core and Validation specifications meta-schema",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format"},{$ref:"meta/content"}],type:["object","boolean"],properties:{definitions:{$comment:"While no longer an official keyword as it is replaced by $defs, this keyword is retained in the meta-schema to prevent incompatible extensions as it remains in common use.",type:"object",additionalProperties:{$recursiveRef:"#"},default:{}},dependencies:{$comment:'"dependencies" is no longer a keyword, but schema authors should avoid redefining it to facilitate a smooth transition to "dependentSchemas" and "dependentRequired"',type:"object",additionalProperties:{anyOf:[{$recursiveRef:"#"},{$ref:"meta/validation#/$defs/stringArray"}]}}}}});var Cu=$((K0,Hv)=>{Hv.exports={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/meta/applicator",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/applicator":!0},$recursiveAnchor:!0,title:"Applicator vocabulary meta-schema",type:["object","boolean"],properties:{additionalItems:{$recursiveRef:"#"},unevaluatedItems:{$recursiveRef:"#"},items:{anyOf:[{$recursiveRef:"#"},{$ref:"#/$defs/schemaArray"}]},contains:{$recursiveRef:"#"},additionalProperties:{$recursiveRef:"#"},unevaluatedProperties:{$recursiveRef:"#"},properties:{type:"object",additionalProperties:{$recursiveRef:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$recursiveRef:"#"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$recursiveRef:"#"}},propertyNames:{$recursiveRef:"#"},if:{$recursiveRef:"#"},then:{$recursiveRef:"#"},else:{$recursiveRef:"#"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$recursiveRef:"#"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$recursiveRef:"#"}}}}});var Pu=$((H0,Gv)=>{Gv.exports={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/meta/content",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/content":!0},$recursiveAnchor:!0,title:"Content vocabulary meta-schema",type:["object","boolean"],properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$recursiveRef:"#"}}}});var Ou=$((G0,Jv)=>{Jv.exports={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/meta/core",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/core":!0},$recursiveAnchor:!0,title:"Core vocabulary meta-schema",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{type:"string",pattern:"^[A-Za-z][-A-Za-z0-9.:_]*$"},$ref:{type:"string",format:"uri-reference"},$recursiveRef:{type:"string",format:"uri-reference"},$recursiveAnchor:{type:"boolean",default:!1},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$recursiveRef:"#"},default:{}}}}});var Iu=$((J0,Bv)=>{Bv.exports={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/meta/format",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/format":!0},$recursiveAnchor:!0,title:"Format vocabulary meta-schema",type:["object","boolean"],properties:{format:{type:"string"}}}});var Tu=$((B0,Yv)=>{Yv.exports={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/meta/meta-data",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/meta-data":!0},$recursiveAnchor:!0,title:"Meta-data vocabulary meta-schema",type:["object","boolean"],properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}}}});var Nu=$((Y0,Wv)=>{Wv.exports={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/meta/validation",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/validation":!0},$recursiveAnchor:!0,title:"Validation vocabulary meta-schema",type:["object","boolean"],properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}}}});var Du=$(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});var Qv=Su(),Xv=Cu(),Zv=Pu(),eg=Ou(),tg=Iu(),rg=Tu(),ng=Nu(),ig=["/properties"];function ag(t){return[Qv,Xv,Zv,eg,e(this,tg),rg,e(this,ng)].forEach(r=>this.addMetaSchema(r,void 0,!1)),this;function e(r,n){return t?r.$dataMetaSchema(n,ig):n}}ms.default=ag});var Mu=$((se,Ru)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.MissingRefError=se.ValidationError=se.CodeGen=se.Name=se.nil=se.stringify=se.str=se._=se.KeywordCxt=void 0;var sg=al(),og=ru(),cg=uu(),lg=hu(),ug=$u(),dg=bu(),fg=Du(),hs="https://json-schema.org/draft/2019-09/schema",pi=class extends sg.default{constructor(e={}){super(ae(G({},e),{dynamicRef:!0,next:!0,unevaluated:!0}))}_addVocabularies(){super._addVocabularies(),this.addVocabulary(cg.default),og.default.forEach(e=>this.addVocabulary(e)),this.addVocabulary(lg.default),this.addVocabulary(ug.default),this.opts.discriminator&&this.addKeyword(dg.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();let{$data:e,meta:r}=this.opts;r&&(fg.default.call(this,e),this.refs["http://json-schema.org/schema"]=hs)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(hs)?hs:void 0)}};Ru.exports=se=pi;Object.defineProperty(se,"__esModule",{value:!0});se.default=pi;var pg=Hr();Object.defineProperty(se,"KeywordCxt",{enumerable:!0,get:function(){return pg.KeywordCxt}});var Er=D();Object.defineProperty(se,"_",{enumerable:!0,get:function(){return Er._}});Object.defineProperty(se,"str",{enumerable:!0,get:function(){return Er.str}});Object.defineProperty(se,"stringify",{enumerable:!0,get:function(){return Er.stringify}});Object.defineProperty(se,"nil",{enumerable:!0,get:function(){return Er.nil}});Object.defineProperty(se,"Name",{enumerable:!0,get:function(){return Er.Name}});Object.defineProperty(se,"CodeGen",{enumerable:!0,get:function(){return Er.CodeGen}});var mg=Jn();Object.defineProperty(se,"ValidationError",{enumerable:!0,get:function(){return mg.default}});var hg=Bn();Object.defineProperty(se,"MissingRefError",{enumerable:!0,get:function(){return hg.default}})});var jo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["app-events"]],standalone:!0,features:[Xe],decls:1,vars:0,template:function(i,a){i&1&&Re(0,"router-outlet")},dependencies:[Xs],changeDetection:0});let t=e;return t})();var J=_o({source:"Event",events:{"Get Events":(t={})=>({filters:t}),"Events fetched":xe(),"Reset events":xe(),"Get event details":xe(),"Event details fetched":xe(),"Create event":xe(),"Event created":xe(),"Delete event":xe(),"Event deleted":xe(),"Upload signals":xe(),"Signals uploaded":xe()}});var yd={events:[],filters:{},uploadingSignalsInProgress:!1},_d=/^\/events\/[\d]+$/,ko=Eo(yd,vt(J.eventDetailsFetched,(t,{details:e})=>ae(G({},t),{details:e})),vt(J.resetEvents,J.eventCreated,J.eventDeleted,t=>ae(G({},t),{events:[],filters:ae(G({},t.filters),{offset:0})})),vt(J.getEvents,(t,{filters:e})=>ae(G({},t),{filters:e})),vt(J.eventsFetched,(t,{events:e})=>ae(G({},t),{events:[...t.events.slice(),...e]})),vt(J.uploadSignals,t=>ae(G({},t),{uploadingSignalsInProgress:!0})),vt(J.signalsUploaded,t=>ae(G({},t),{uploadingSignalsInProgress:!1})),vt(Do,(t,{payload:e})=>$d(t,e.event.url)));function $d(t,e){return _d.test(e)?ae(G({},t),{details:void 0}):t}var Rn=$o(In),Ao=Mr(Rn,t=>t.events),qo=Mr(Rn,t=>t.details),xo=Mr(Rn,t=>t.filters),Vo=Mr(Rn,t=>t.uploadingSignalsInProgress);var Uo=(()=>{let e=class e{constructor(n,i,a,s){this.actions$=n,this.eventsService=i,this.store=a,this.snackbarService=s,this.loadEvents=ur(()=>this.actions$.pipe(dr(J.getEvents,J.eventCreated,J.eventDeleted,J.signalsUploaded),Us(this.store.select(xo)),nr(([c,u])=>this.eventsService.readEvents(u).pipe(De(f=>J.eventsFetched({events:f})),rr(()=>tr))))),this.loadDetails=ur(()=>this.actions$.pipe(dr(J.getEventDetails),nr(({id:c})=>this.eventsService.readEventDetails(c).pipe(De(u=>J.eventDetailsFetched({details:u})),rr(()=>tr))))),this.createEvent=ur(()=>this.actions$.pipe(dr(J.createEvent),nr(({event:c})=>this.eventsService.createEvent(c).pipe(De(()=>J.eventCreated()),rr(()=>tr))))),this.deleteEvent=ur(()=>this.actions$.pipe(dr(J.deleteEvent),nr(({id:c})=>this.eventsService.deleteEvent(c).pipe(De(()=>J.eventDeleted()),rr(()=>tr))))),this.uploadSignals=ur(()=>this.actions$.pipe(dr(J.uploadSignals),nr(({signals:c})=>this.eventsService.uploadSignals(c).pipe(De(()=>(this.snackbarService.open("Signals uploaded \u2714"),J.signalsUploaded())),rr(()=>tr)))))}};e.\u0275fac=function(i){return new(i||e)(Dr(To),Dr(lr),Dr(Ze),Dr(Mo))},e.\u0275prov=Ls({token:e,factory:e.\u0275fac});let t=e;return t})();var Lo=(()=>{let e=class e{chipsRequiredValidator(){return n=>(n.get("devicesCtrl")?.value.length===0?n.get("deviceTextCtrl")?.setErrors({chipsRequired:!0}):n.get("deviceTextCtrl")?.setErrors(null),null)}constructor(n,i,a,s){this.eventsService=n,this.compositionService=i,this.store=a,this.dialogRef=s,this.eventTypeCtrl=new Pe("",[So]),this.types$=new Nt([]),this.typeOptions$=this.types$.asObservable(),this.devicesStatusCtrl=new Pe(""),this.deviceStatuses$=new Nt([]),this.deviceStatusesOptions$=this.deviceStatuses$.asObservable(),this.devicesCtrl=new Pe([],{nonNullable:!0}),this.devices$=new Nt([]),this.deviceOptions$=this.devices$.asObservable(),this.deviceTextCtrl=new Pe("",{nonNullable:!0}),this.eventForm=new Rr({eventTypeCtrl:this.eventTypeCtrl,nestedForm:new Rr({devicesCtrl:this.devicesCtrl,deviceTextCtrl:this.deviceTextCtrl},[this.chipsRequiredValidator().bind(this)]),devicesStatusCtrl:this.devicesStatusCtrl})}onEventTypeInput(n){this.eventsService.readEventTypes({name:n}).pipe(De(i=>i.map(a=>({label:a.name,value:a.id}))),ft(1)).subscribe(i=>this.types$.next(i))}onDeviceStatusInput(n){this.compositionService.readDeviceStatuses({name:n}).pipe(ft(1)).subscribe(i=>this.deviceStatuses$.next(i))}handleDeviceInput(n){this.compositionService.readDevices({name:n,exludedItemIds:this.selectedDevices}).pipe(ft(1),De(i=>i.map(a=>Tn(a)))).subscribe(i=>this.devices$.next(i))}handleDeviceChipsChange(){this.devices$.next([])}get selectedDevices(){return this.devicesCtrl.value.map(n=>Number(n))}get newDevicesStatus(){return this.devicesStatusCtrl.value}createEvent(){let n=this.eventTypeCtrl.value;if(bo(n)){let i={eventTypeId:n.value,deviceIds:this.selectedDevices,newDevicesStatusId:Co(this.newDevicesStatus)};this.store.dispatch(J.createEvent({event:i})),this.dialogRef.close(!0)}}};e.\u0275fac=function(i){return new(i||e)(ue(lr),ue(On),ue(Ze),ue(Po))},e.\u0275cmp=Be({type:e,selectors:[["app-event-form"]],standalone:!0,features:[Xe],decls:10,vars:12,consts:[[3,"formGroup"],[3,"label","ctrl","options$","userTextInput"],["label","Devices","placeholder","Device...",3,"required","options$","itemsCtrl","textCtrl","inputTextChanged","chipsChanged"],[1,"actions"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"]],template:function(i,a){i&1&&(O(0,"mat-card")(1,"h1"),k(2,"Add manual event"),P(),O(3,"form",0)(4,"app-single-autocomplete",1),de("userTextInput",function(c){return a.onEventTypeInput(c)}),P(),O(5,"app-single-autocomplete",1),de("userTextInput",function(c){return a.onDeviceStatusInput(c)}),P(),O(6,"app-autocomplete-chips",2),de("inputTextChanged",function(c){return a.handleDeviceInput(c)})("chipsChanged",function(){return a.handleDeviceChipsChange()}),P(),O(7,"div",3)(8,"button",4),de("click",function(){return a.createEvent()}),k(9," Add "),P()()()()),i&2&&(N(3),B("formGroup",a.eventForm),N(1),B("label","Event type")("ctrl",a.eventTypeCtrl)("options$",a.typeOptions$),N(1),B("label","New devices status")("ctrl",a.devicesStatusCtrl)("options$",a.deviceStatusesOptions$),N(1),B("required",!0)("options$",a.deviceOptions$)("itemsCtrl",a.devicesCtrl)("textCtrl",a.deviceTextCtrl),N(2),B("disabled",a.eventForm.invalid))},dependencies:[ht,Sn,mt,pt,Cn,so,ao,co,Ro,Dn],styles:["mat-card[_ngcontent-%COMP%]{padding:20px 16px}mat-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:26px}mat-card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:space-between}"],changeDetection:0});let t=e;return t})();var vs=Vs(gd());var zo={$schema:"http://json-schema.org/draft-07/schema#",title:"Automatically generated signals",description:"This document records signals produced by a device",type:"object",properties:{signals:{type:"array",items:{type:"object",properties:{description:{type:"string"},value:{type:"number"},sourceDevice:{type:"object",properties:{country:{type:"string"},city:{type:"string"},location:{type:"string"},composition:{type:"string"},name:{type:"string"}},required:["country","city","location","composition","name"]},events:{type:"array",items:{type:"object",properties:{name:{type:"string"},newDevicesStatusName:{type:"string"},affectedDevices:{type:"array",items:{type:"object",properties:{country:{type:"string"},city:{type:"string"},location:{type:"string"},composition:{type:"string"},names:{type:"array",items:{type:"string"}}},required:["country","city","location","composition","names"]}}},required:["name","affectedDevices"]}}},required:["description","value","sourceDevice"]}}}};var ku=Vs(Mu());var ju={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};function gg(t,e){if(t&1){let r=jt();O(0,"input",2,3),de("change",function(){Dt(r);let i=yn(1),a=We();return Rt(a.onChange(i.files))}),P()}}function yg(t,e){t&1&&Re(0,"mat-progress-spinner",4),t&2&&B("color","accent")("mode","indeterminate")}var Au=new ku.default;Au.addMetaSchema(ju);var qu=(()=>{let e=class e{constructor(n,i){this.store=n,this.changeRef=i,this.destroyedRef=hn(gn),this.loading=!1}ngOnInit(){this.store.select(Vo).pipe(cr(this.destroyedRef)).subscribe(n=>{this.loading=n,this.changeRef.markForCheck()})}onChange(n){if(n===null)return;let i=n[0],a=new FileReader;a.readAsText(i),a.onload=s=>{let c=a.result,u=JSON.parse(c);if(Au.validate(zo,JSON.parse(c))){let p=u.signals;this.store.dispatch(J.uploadSignals({signals:p}))}}}};e.\u0275fac=function(i){return new(i||e)(ue(Ze),ue(vn))},e.\u0275cmp=Be({type:e,selectors:[["app-upload-signals"]],standalone:!0,features:[Xe],decls:6,vars:1,consts:[[1,"centered-container"],["type","file"],["type","file",3,"change"],["uploads",""],[3,"color","mode"]],template:function(i,a){i&1&&(O(0,"mat-card")(1,"h1"),k(2,"Upload .json file with signals"),P(),O(3,"div",0),Ye(4,gg,2,0,"input",1)(5,yg,1,2),P()()),i&2&&(N(4),Mt(4,a.loading?5:4))},dependencies:[pt,ht,mt,yo],styles:["mat-card[_ngcontent-%COMP%]{padding:20px 16px;height:300px}mat-card[_ngcontent-%COMP%]   .centered-container[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}"],changeDetection:0});let t=e;return t})();function Eg(t,e){if(t&1){let r=jt();O(0,"div",23),de("click",function(){let a=Dt(r).$implicit,s=We(2);return Rt(s.goToDetails(a.id))}),O(1,"div",24)(2,"p"),k(3),P(),O(4,"p"),k(5),ar(6,"date"),P(),O(7,"p"),k(8),P()()()}if(t&2){let r=e.$implicit;N(3),Qe(r.typeName),N(2),Qe(sr(6,3,r.eventCreationAt)),N(3),Qe(r.manualInsert?"Yes":"No")}}function bg(t,e){if(t&1){let r=jt();O(0,"div",18)(1,"div",19)(2,"p"),k(3,"Type"),P(),O(4,"p"),k(5,"Added on"),P(),O(6,"p"),k(7,"Manual"),P()(),O(8,"div",20)(9,"cdk-virtual-scroll-viewport",21),de("scrolledIndexChange",function(){Dt(r);let i=We();return Rt(i.onScroll())}),Ye(10,Eg,9,5,"div",22),P()()()}if(t&2){let r=We();B("@fadeIn",void 0),N(9),B("itemSize",60),N(1),B("cdkVirtualForOf",r.events)}}function Sg(t,e){t&1&&Re(0,"app-no-data")}var ln=function(t){return t.ANY="Any",t.MANUAL="Manual",t.NOT_MANUAL="Not manual",t}(ln||{}),xu=(()=>{let e=class e extends Io{constructor(n,i,a,s,c,u){super(),this.store=n,this.router=i,this.dialogService=a,this.eventService=s,this.compositionService=c,this.changeRef=u,this.destroyRef=hn(gn),this.ManualInsert=ln,this.typesCtrl=new Pe([],{nonNullable:!0}),this.typeCtrl=new Pe("",{nonNullable:!0}),this.types$=new Nt([]),this.typeOptions$=this.types$.asObservable(),this.devicesCtrl=new Pe([],{nonNullable:!0}),this.deviceCtrl=new Pe("",{nonNullable:!0}),this.devices$=new Nt([]),this.deviceOptions$=this.devices$.asObservable(),this.manualInsertCtrl=new Pe(ln.ANY,{nonNullable:!0}),this.startDateCtrl=new Pe(null),this.endDateCtrl=new Pe(null),this.form=new Rr({typesCtrl:this.typesCtrl,devicesCtrl:this.devicesCtrl,endDateCtrl:this.endDateCtrl,startDateCtrl:this.startDateCtrl,manualInsertCtrl:this.manualInsertCtrl})}ngOnInit(){this.refetchEvents(),this.scrolled$.pipe($i(300),cr(this.destroyRef)).subscribe(()=>this.getOffset()),this.store.select(Ao).pipe(cr(this.destroyRef)).subscribe(n=>{this.events=n,this.changeRef.markForCheck()}),this.form.valueChanges.pipe(cr(this.destroyRef),$i(300)).subscribe(()=>this.refetchEvents())}goToDetails(n){this.router.navigate(["events",n])}openEventForm(){this.dialogService.open(Lo).afterClosed().pipe(ft(1),Fs(n=>n===!0)).subscribe(n=>{this.offset=0})}openDialogForUploadingSignals(){this.dialogService.open(qu)}handleTypeInput(n){let i=this.getEventTypeIds();this.eventService.readEventTypes({name:n,exludedItemIds:i}).pipe(De(a=>a.map(s=>({label:s.name,value:s.id}))),ft(1)).subscribe(a=>this.types$.next(a))}handleDeviceInput(n){let i=this.getDeviceIds();this.compositionService.readDevices({name:n,exludedItemIds:i}).pipe(De(a=>a.map(s=>Tn(s))),ft(1)).subscribe(a=>this.devices$.next(a))}refetchEvents(){this.offset=0,this.store.dispatch(J.resetEvents()),this.getEvents()}clearDates(){this.startDateCtrl.reset(),this.endDateCtrl.reset()}clearDisabled(){return this.startDateCtrl.value===null&&this.endDateCtrl.value===null}getEventTypeIds(){return this.typesCtrl.value.map(n=>Number(n))}getDeviceIds(){return this.devicesCtrl.value.map(n=>Number(n))}getNewBatch(){this.getEvents()}getEvents(){let n=this.getEventTypeIds(),i=this.getDeviceIds(),a=this.startDateCtrl.value===null?void 0:(0,vs.default)(this.startDateCtrl.value).format("DD-MM-YYYY"),s=this.endDateCtrl.value===null?void 0:(0,vs.default)(this.endDateCtrl.value).format("DD-MM-YYYY"),c=this.checkIfManuallyInserted(this.manualInsertCtrl.value),u={eventTypeIds:n,deviceIds:i,startDate:a,endDate:s,manuallyInserted:c,offset:this.offset};this.store.dispatch(J.getEvents(u))}checkIfManuallyInserted(n){switch(n){case ln.MANUAL:return!0;case ln.NOT_MANUAL:return!1;default:return}}};e.\u0275fac=function(i){return new(i||e)(ue(Ze),ue($n),ue(Oo),ue(lr),ue(On),ue(vn))},e.\u0275cmp=Be({type:e,selectors:[["app-event-list"]],viewQuery:function(i,a){if(i&1&&Js(or,5),i&2){let s;Gs(s=Bs())&&(a.viewport=s.first)}},standalone:!0,features:[zs,Xe],decls:37,vars:21,consts:[[1,"wrapper"],[1,"sidebar"],[3,"rangePicker"],["readonly","","matStartDate","","placeholder","Start date",3,"formControl"],["readonly","","matEndDate","","placeholder","End date",3,"formControl"],["matIconSuffix","",3,"for"],["matSuffix","",3,"disabled","click"],["matDatepickerToggleIcon",""],["picker",""],[3,"formControl"],[3,"checked","value"],[3,"value"],["label","Types","placeholder","Type...",3,"options$","itemsCtrl","textCtrl","inputTextChanged"],["label","Devices","placeholder","Device...",3,"options$","itemsCtrl","textCtrl","inputTextChanged"],[1,"list"],[1,"heading"],["mat-raised-button","","color","accent",3,"click"],["class","table"],[1,"table"],[1,"columns"],[1,"list-wrapper"],["CdkScrollable","",3,"itemSize","scrolledIndexChange"],["class","row-wrapper",3,"click",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"row-wrapper",3,"click"],[1,"row","mat-elevation-z2"]],template:function(i,a){if(i&1&&(O(0,"div",0)(1,"mat-card",1)(2,"h2"),k(3,"Filters"),P(),O(4,"div")(5,"mat-form-field")(6,"mat-label"),k(7,"Date range"),P(),O(8,"mat-date-range-input",2),Re(9,"input",3)(10,"input",4),P(),Re(11,"mat-datepicker-toggle",5),O(12,"mat-datepicker-toggle",6),de("click",function(){return a.clearDates()}),O(13,"mat-icon",7),k(14,"clear"),P()(),Re(15,"mat-date-range-picker",null,8),P(),O(17,"mat-button-toggle-group",9)(18,"mat-button-toggle",10),k(19),P(),O(20,"mat-button-toggle",11),k(21),P(),O(22,"mat-button-toggle",11),k(23),P()(),O(24,"app-autocomplete-chips",12),de("inputTextChanged",function(c){return a.handleTypeInput(c)}),P(),O(25,"app-autocomplete-chips",13),de("inputTextChanged",function(c){return a.handleDeviceInput(c)}),P()()(),O(26,"mat-card",14)(27,"div",15)(28,"h2"),k(29,"Events"),P(),O(30,"div")(31,"button",16),de("click",function(){return a.openEventForm()}),k(32," Add manual event "),P(),O(33,"button",16),de("click",function(){return a.openDialogForUploadingSignals()}),k(34," Upload signals "),P()()(),Ye(35,bg,11,3,"div",17)(36,Sg,1,0),P()()),i&2){let s=yn(16);N(4),B("@fadeIn",void 0),N(4),B("rangePicker",s),N(1),B("formControl",a.startDateCtrl),N(1),B("formControl",a.endDateCtrl),N(1),B("for",s),N(1),B("disabled",a.clearDisabled()),N(5),B("formControl",a.manualInsertCtrl),N(1),B("checked",!0)("value",a.ManualInsert.ANY),N(1),Qe(a.ManualInsert.ANY),N(1),B("value",a.ManualInsert.MANUAL),N(1),Qe(a.ManualInsert.MANUAL),N(1),B("value",a.ManualInsert.NOT_MANUAL),N(1),Qe(a.ManualInsert.NOT_MANUAL),N(1),B("options$",a.typeOptions$)("itemsCtrl",a.typesCtrl)("textCtrl",a.typeCtrl),N(1),B("options$",a.deviceOptions$)("itemsCtrl",a.devicesCtrl)("textCtrl",a.deviceCtrl),N(10),Mt(35,a.events!==void 0&&a.events.length>0?35:36)}},dependencies:[bn,wn,En,or,pt,_n,ht,Sn,Zs,mt,ro,eo,to,lo,uo,po,fo,vo,mo,ho,go,Dn,Cn,no,io,oo,Nn],styles:[".row-wrapper[_ngcontent-%COMP%]{margin:0 45px;padding:10px}.row-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:10px 0;background-color:#fff;display:flex;justify-content:space-evenly;align-items:center;border-radius:20px}.row-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;flex:1;text-align:center;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.row-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:hover{cursor:pointer}.row-wrapper[_ngcontent-%COMP%]   .row.not-operational[_ngcontent-%COMP%]{background-color:#f0b3b3}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{scrollbar-gutter:stable both-edges}.columns[_ngcontent-%COMP%]{margin:0 76px;display:flex;justify-content:space-evenly}.columns[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;flex:1;font-size:20px;font-weight:500;color:#a9a9a9}.wrapper[_ngcontent-%COMP%]{padding:0 5vw;height:100%;display:flex;flex-direction:row}.wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{flex:2;background-color:#f2f8ef;height:100%;width:100%;overflow-y:hidden;margin-right:15px;padding:30px 20px}.wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{align-self:flex-start}.wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:24px}.wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-datepicker-toggle[_ngcontent-%COMP%]{display:inline-block!important}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{flex:6;padding:30px 0;background-color:#f2f8ef;width:100%;overflow-y:hidden;height:100%;display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.example-viewport, .table[_ngcontent-%COMP%], app-no-data)[_ngcontent-%COMP%]{margin-left:45px;margin-right:45px}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{min-height:100%}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 15px 20px}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:10px}"],data:{animation:[Pn]},changeDetection:0});let t=e;return t})();function Cg(t,e){if(t&1){let r=jt();O(0,"div",12)(1,"div",13),de("click",function(){let a=Dt(r).$implicit,s=We(3);return Rt(s.goToDevice(a.id))}),O(2,"p"),k(3),P(),O(4,"p"),k(5),ar(6,"date"),P(),O(7,"p"),k(8),P()()()}if(t&2){let r=e.$implicit;N(3),Qe(r.name),N(2),Qe(sr(6,3,r.creationAt)),N(3),ir(" ",r.status.isOperational?"Operational":"Not operational"," ")}}function Pg(t,e){if(t&1&&(O(0,"div",7)(1,"div",8)(2,"p"),k(3,"Name"),P(),O(4,"p"),k(5,"Added on"),P(),O(6,"p"),k(7,"Status"),P()(),O(8,"div",9)(9,"cdk-virtual-scroll-viewport",10),Ye(10,Cg,9,5,"div",11),P()()()),t&2){let r=We().ngIf;B("@fadeIn",void 0),N(9),B("itemSize",60),N(1),B("cdkVirtualForOf",r.affectedDevices)}}function Og(t,e){t&1&&Re(0,"app-no-data")}function Ig(t,e){if(t&1&&(O(0,"p")(1,"span",3),k(2,"Value:"),P(),k(3),P()),t&2){let r=We().ngIf;B("@fadeIn",void 0),N(3),ir(" ",r.signal.value,"")}}function Tg(t,e){t&1&&Re(0,"app-no-data")}function Ng(t,e){if(t&1&&(Ks(0),O(1,"mat-card",2)(2,"h2"),k(3,"Event details"),P(),O(4,"div")(5,"p")(6,"span",3),k(7,"Name:"),P(),k(8),P(),O(9,"p")(10,"span",3),k(11,"Manually created:"),P(),k(12),P(),O(13,"p")(14,"span",3),k(15,"Event created at:"),P(),k(16),ar(17,"date"),P()()(),O(18,"mat-card",4)(19,"h2"),k(20,"Affected devices"),P(),Ye(21,Pg,11,3,"div",5)(22,Og,1,0),P(),O(23,"mat-card",6)(24,"h2"),k(25,"Signal"),P(),Ye(26,Ig,4,2,"p")(27,Tg,1,0),P(),Hs()),t&2){let r=e.ngIf;N(4),B("@fadeIn",void 0),N(4),ir(" ",r.event.typeName,""),N(4),ir(" ",r.event.manualInsert?"Yes":"No"," "),N(4),ir(" ",sr(17,6,r.event.eventCreationAt)," "),N(5),Mt(21,r.affectedDevices.length>0?21:22),N(5),Mt(26,r.signal!==null&&r.signal!==void 0?26:27)}}var Vu=(()=>{let e=class e{constructor(n,i,a){this.store=n,this.route=i,this.router=a,this.details$=this.store.select(qo)}ngOnInit(){let n=Number(this.route.snapshot.paramMap.get("id"));this.store.dispatch(J.getEventDetails({id:n}))}goToDevice(n){this.router.navigate(["compositions/device-details",n])}};e.\u0275fac=function(i){return new(i||e)(ue(Ze),ue(Qs),ue($n))},e.\u0275cmp=Be({type:e,selectors:[["app-event-details"]],standalone:!0,features:[Xe],decls:3,vars:3,consts:[[1,"wrapper"],[4,"ngIf"],[1,"event-details"],[1,"bold"],[1,"affected-devices"],["class","table"],[1,"signal"],[1,"table"],[1,"columns"],[1,"list-wrapper"],["CdkScrollable","",1,"example-viewport",3,"itemSize"],["class","row-wrapper",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"row-wrapper"],[1,"row","mat-elevation-z2",3,"click"]],template:function(i,a){i&1&&(O(0,"div",0),Ye(1,Ng,28,8,"ng-container",1),ar(2,"async"),P()),i&2&&(N(1),B("ngIf",sr(2,1,a.details$)))},dependencies:[ht,mt,pt,Ys,Ws,_n,bn,wn,En,or,Nn],styles:[".row-wrapper[_ngcontent-%COMP%]{margin:0 45px;padding:10px}.row-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:10px 0;background-color:#fff;display:flex;justify-content:space-evenly;align-items:center;border-radius:20px}.row-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;flex:1;text-align:center;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.row-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:hover{cursor:pointer}.row-wrapper[_ngcontent-%COMP%]   .row.not-operational[_ngcontent-%COMP%]{background-color:#f0b3b3}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{scrollbar-gutter:stable both-edges}.columns[_ngcontent-%COMP%]{margin:0 76px;display:flex;justify-content:space-evenly}.columns[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;flex:1;font-size:20px;font-weight:500;color:#a9a9a9}.wrapper[_ngcontent-%COMP%]{padding:0 5vw;height:100%;display:flex;flex-direction:row}.wrapper[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]{flex:1;background-color:#f2f8ef;height:100%;width:100%;overflow-y:hidden;padding:30px 20px}.wrapper[_ngcontent-%COMP%]   .affected-devices[_ngcontent-%COMP%]{flex:2;margin:0 15px;padding:30px 0;background-color:#f2f8ef;width:100%;overflow-y:hidden;height:100%;display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   .affected-devices[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.example-viewport, .table[_ngcontent-%COMP%], app-no-data)[_ngcontent-%COMP%]{margin-left:45px;margin-right:45px}.wrapper[_ngcontent-%COMP%]   .affected-devices[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   .affected-devices[_ngcontent-%COMP%]   .list-wrapper[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .affected-devices[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{min-height:100%}.wrapper[_ngcontent-%COMP%]   .signal[_ngcontent-%COMP%]{flex:1;padding:30px 0;background-color:#f2f8ef;height:100%;width:100%;overflow-y:hidden}.wrapper[_ngcontent-%COMP%]   .signal[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.example-viewport, .table[_ngcontent-%COMP%], app-no-data)[_ngcontent-%COMP%]{margin-left:45px;margin-right:45px}.wrapper[_ngcontent-%COMP%]   .bold[_ngcontent-%COMP%]{font-weight:500;font-size:16px}"],data:{animation:[Pn]},changeDetection:0});let t=e;return t})();var X_=[{path:"",component:jo,providers:[wo({name:In,reducer:ko}),No([Uo])],children:[{path:"",component:xu},{path:":id",component:Vu}]}];export{X_ as EVENT_ROUTES};
