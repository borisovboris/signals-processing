import{a as H}from"./chunk-HQLU3KB5.js";import{a as K}from"./chunk-4S6LF2QW.js";import{a as J}from"./chunk-2JCW2XGL.js";import{q as $}from"./chunk-7FJ4ADOC.js";import{$b as l,B as v,D as C,E as _,Ea as f,Ec as B,Ja as o,Ka as M,L as y,Na as S,Qb as O,U as w,Ub as R,Wa as P,Wb as F,Xb as N,Yb as U,Za as k,Zb as D,_b as j,ac as A,bc as L,cc as T,dc as g,ec as V,gc as G,ia as i,ic as q,ja as d,ka as x,kc as z,lc as Z,pb as I,q as h,qa as s,rb as E,sa as c,x as b,xa as n,ya as t,za as u}from"./chunk-OWV6CK4N.js";var Q=/^(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=\D*\d).{10,}$/;function Y(m,a){m&1&&(n(0,"mat-error"),o(1,"Username already exists"),t())}function ee(m,a){m&1&&(n(0,"mat-error"),o(1,"Should be at least 10 characters, contain a digit and capital letter"),t())}var _e=(()=>{let a=class a{uniqueUsernameValidator(){return p=>p.valueChanges.pipe(b(300),v(),y(r=>this.authService.checkIfUsernameExists(r)),h(r=>r?{exists:!0}:null),_(),C(()=>this.changeRef.markForCheck()))}constructor(p,r,e){this.store=p,this.authService=r,this.changeRef=e,this.hide=!0,this.form=new T({username:new g("",{validators:[l.required,l.maxLength(20),l.minLength(3)],asyncValidators:[this.uniqueUsernameValidator()],nonNullable:!0}),password:new g("",{validators:[l.required,l.pattern(Q)],nonNullable:!0})})}get username(){return this.form.controls.username}get password(){return this.form.controls.password}get formPending(){return this.form.pending}registerUser(){this.store.dispatch(H.registerUser({user:{username:this.username.value,password:this.password.value}}))}};a.\u0275fac=function(r){return new(r||a)(d($),d(K),d(x))},a.\u0275cmp=w({type:a,selectors:[["app-register"]],standalone:!0,features:[S],decls:23,vars:8,consts:[[1,"wrapper","register"],[1,"card","mat-elevation-z8"],[1,"fields-wrapper"],[1,"fields",3,"formGroup"],["formControlName","username","matInput",""],[4,"ngIf"],["formControlName","password","autocomplete","off","matInput","","autocomplete","on",3,"type"],["matSuffix","",3,"click"],[1,"action-button"],["mat-button","",3,"routerLink"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"]],template:function(r,e){r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),o(4,"Register account"),t(),n(5,"form",3)(6,"mat-form-field")(7,"mat-label"),o(8,"Username"),t(),u(9,"input",4),c(10,Y,2,0,"mat-error",5),t(),n(11,"mat-form-field")(12,"mat-label"),o(13,"Password"),t(),u(14,"input",6),n(15,"mat-icon",7),f("click",function(X){return X.stopPropagation(),e.hide=!e.hide}),o(16),t(),c(17,ee,2,0,"mat-error",5),t()()(),n(18,"div",8)(19,"button",9),o(20," Already registered? Log in here. "),t(),n(21,"button",10),f("click",function(){return e.registerUser()}),o(22," Register "),t()()()()),r&2&&(i(1),s("@fadeIn",void 0),i(4),s("formGroup",e.form),i(5),s("ngIf",e.username.hasError("exists")),i(4),s("type",e.hide?"password":"text"),i(2),M(e.hide?"visibility_off":"visibility"),i(1),s("ngIf",e.password.hasError("pattern")),i(2),s("routerLink","/login"),i(2),s("disabled",e.form.invalid||e.formPending))},dependencies:[k,P,B,O,R,D,F,N,U,Z,z,V,j,A,L,G,q,E,I],styles:[".wrapper[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}.wrapper.login[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(255,255,255,.15) 0%,rgba(0,0,0,.15) 100%),radial-gradient(at top center,rgba(255,255,255,.4) 0%,rgba(0,0,0,.4) 120%) #989898;background-blend-mode:multiply,multiply}.wrapper.register[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#d7d2cc 0%,#304352 100%)}.wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:300px;width:400px;background-color:#fff;border-radius:12px;display:flex;flex-direction:column;justify-content:space-between}.wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-left:20px;margin-top:15px}.wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:15px;margin-left:15px;margin-right:15px}.wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-direction:column;justify-content:center}"],data:{animation:[J]},changeDetection:0});let m=a;return m})();export{_e as RegisterComponent};
